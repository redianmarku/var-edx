(function(e){"use strict";RequireJS.define("edx-ui-toolkit/js/utils/constants",[],function(){return{keys:{tab:"Tab",enter:"Enter",esc:"Escape",space:"Space",left:"ArrowLeft",up:"ArrowUp",right:"ArrowRight",down:"ArrowDown"},keyCodes:{tab:9,enter:13,esc:27,space:32,left:37,up:38,right:39,down:40}}})}).call(this,"function"==typeof RequireJS.define&&RequireJS.define.amd?RequireJS.define:"undefined"!=typeof RequireJS?RequireJS.define:edx.GlobalLoader.defineAs("constants","edx-ui-toolkit/js/utils/constants")),RequireJS.define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),RequireJS.define("text!edx-ui-toolkit/js/dropdown-menu/dropdown.underscore",[],function(){return'<a href="<%- main.url %>" class="menu-title">\n    <% if (main.screenreader_label) { %>\n        <span class="sr-only"><%- main.screenreader_label %> </span>\n    <% } %>\n    <% if (main.image) { %>\n        <img class="menu-image" src="<%- main.image %>" alt="">\n    <% } %>\n    <%- main.text %>\n</a>\n<button type="button" class="menu-button button-more has-dropdown js-dropdown-button <% if (!button.icon) { %>default-icon<% } %>" aria-haspopup="true" aria-expanded="false" aria-controls="<%- menuId %>">\n    <% if (button.icon) { %>\n        <span class="icon <%- button.icon %>" aria-hidden="true"></span>\n    <% } %>\n    <span class="sr-only"><%- button.label %></span>\n</button>\n<ul class="dropdown-menu list-divided is-hidden" id="<%- menuId %>" tabindex="-1">\n    <% _.each(items, function(item, index) { %>\n        <li class="dropdown-item item has-block-link">\n            <a href="<%- item.url %>" class="action"><%- item.text %></a>\n        </li>\n    <% }); %>\n</ul>\n'}),function(e){"use strict";RequireJS.define("edx-ui-toolkit/js/dropdown-menu/dropdown-menu-view",["backbone","jquery","underscore","edx-ui-toolkit/js/utils/constants","text!./dropdown.underscore"],function(e,n,t,i,o){var s=e.View.extend({tpl:t.template(o),events:{"click .js-dropdown-button":"clickOpenDropdown","click a":"analyticsLinkClick",keydown:"viewKeypress"},dropdownButton:".js-dropdown-button",menu:".dropdown-menu",initialize:function(e){e.parent&&(this.$parent=n(e.parent)),this.menuId=e.menuId||"dropdown-menu-"+this.cid,this.keyBack=[i.keyCodes.up,i.keyCodes.left],this.keyForward=[i.keyCodes.down,i.keyCodes.right],this.keyClose=[i.keyCodes.esc,i.keyCodes.space]},className:function(){return this.options.className},render:function(){return this.model.set({menuId:this.menuId}),this.$el.html(this.tpl(this.model.toJSON())),this.$parent.replaceWith(this.$el),this.postRender(),this},postRender:function(){this.$menu=this.$(".dropdown-menu"),this.$page=n(document),this.$dropdownButton=this.$(this.dropdownButton),this.$lastItem=this.$menu.find("li:last-child a")},analyticsLinkClick:function(e){return e},clickCloseDropdown:function(e,t){var i,o=n(e.target)||n(document);o.hasClass(this.dropdownButton)||(i=o.closest(this.dropdownButton),i.length>0&&(o=i)),o.hasClass("button-more")||o.hasClass("has-dropdown")||t.closeDropdownMenu()},clickOpenDropdown:function(e){e.preventDefault(),this.openMenu(this.$dropdownButton)},closeDropdownMenu:function(){var e=this.$(this.menu);e.removeClass("is-visible").addClass("is-hidden"),this.$dropdownButton.removeClass("is-active").attr("aria-expanded","false")},focusFirstItem:function(){this.$menu.find(".dropdown-item:first-child .action").focus()},focusLastItem:function(){this.$lastItem.focus()},handlerIsAction:function(e,n){t.contains(this.keyForward,e)?this.nextMenuItemLink(n):t.contains(this.keyBack,e)&&this.previousMenuItemLink(n)},handlerIsButton:function(e,n){t.contains(this.keyForward,e)?this.focusFirstItem():(t.contains(this.keyBack,e)||e===i.keyCodes.tab&&n.shiftKey)&&(n.preventDefault(),this.focusLastItem())},handlerIsMenu:function(e){t.contains(this.keyForward,e)?this.focusFirstItem():t.contains(this.keyBack,e)&&this.$dropdownButton.focus()},handlerPageClicks:function(e){this.$page.off("click.dropdown"),this.$page.on("click.dropdown",function(n){e.clickCloseDropdown(n,e)})},nextMenuItemLink:function(e){var n=this.$(".dropdown-menu").children(".dropdown-item").find(".action"),t=n.length-1,i=n.index(e),o=i+1;i===t?this.$dropdownButton.focus():n.eq(o).focus()},openMenu:function(e){var n=this.$menu;n.hasClass("is-visible")?this.closeDropdownMenu():(e.addClass("is-active").attr("aria-expanded","true"),n.removeClass("is-hidden").addClass("is-visible"),n.focus(),this.setOrientation(),this.handlerPageClicks(this))},previousMenuItemLink:function(e){var n=this.$(".dropdown-menu").children(".dropdown-item").find(".action"),t=n.index(e),i=t-1;0===t?this.$dropdownButton.focus():n.eq(i).focus()},setOrientation:function(){var e=n(window).width()/2,t=this.$dropdownButton.offset().left>e?"align-right":"align-left";this.$menu.removeClass("align-left align-right").addClass(t)},viewKeypress:function(e){var o=e.keyCode,s=n(e.target);(t.contains(this.keyForward,o)||t.contains(this.keyBack,o))&&e.preventDefault(),o!==i.keyCodes.tab||e.shiftKey||t.first(s)!==t.first(this.$lastItem)?t.contains(this.keyClose,o)?(this.closeDropdownMenu(),this.$dropdownButton.focus()):s.hasClass("action")?this.handlerIsAction(o,s):s.hasClass("dropdown-menu")?this.handlerIsMenu(o):s.hasClass("has-dropdown")&&this.handlerIsButton(o,e):(e.preventDefault(),this.$dropdownButton.focus())}});return s})}.call(this,"function"==typeof RequireJS.define&&RequireJS.define.amd?RequireJS.define:RequireJS.define),function(e){"use strict";RequireJS.define("js/header_factory",["edx-ui-toolkit/js/dropdown-menu/dropdown-menu-view"],function(e){return function(){var n=new e({el:".js-header-user-menu"}).postRender();return n}})}.call(this,define||RequireJS.define);
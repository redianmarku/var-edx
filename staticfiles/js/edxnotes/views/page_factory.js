/*
  backbone.paginator
  http://github.com/backbone-paginator/backbone.paginator

  Copyright (c) 2016 Jimmy Yuen Ho Wong and contributors

  @module
  @license MIT
*/

!function(e){if("object"==typeof exports&&"function"==typeof require)module.exports=e(require("underscore"),require("backbone"));else if("function"==typeof RequireJS.define&&RequireJS.define.amd)RequireJS.define("backbone.paginator",["underscore","backbone"],e);else if("undefined"!=typeof _&&"undefined"!=typeof Backbone){var t=Backbone.PageableCollection,i=e(_,Backbone);Backbone.PageableCollection.noConflict=function(){return Backbone.PageableCollection=t,i}}}(function(e,t){"use strict";function i(t,i){if(!e.isNumber(t)||e.isNaN(t)||!e.isFinite(t)||~~t!==t)throw new TypeError("`"+i+"` must be a finite integer");return t}function s(e){for(var t,i,s,n,r={},o=decodeURIComponent,a=e.split("&"),l=0,c=a.length;c>l;l++){var u=a[l];t=u.split("="),i=t[0],s=t[1],null==s&&(s=!0),i=o(i),s=o(s),n=r[i],f(n)?n.push(s):n?r[i]=[n,s]:r[i]=s}return r}function n(e,t,i){var s=e._events[t];if(s&&s.length){var n=s[s.length-1],r=n.callback;n.callback=function(){try{r.apply(this,arguments),i()}catch(e){throw e}finally{n.callback=r}}}else i()}var r=e.extend,o=e.omit,a=e.clone,l=e.each,c=e.pick,u=e.includes,h=e.isEmpty,d=e.pairs||e.toPairs,g=e.invert,f=e.isArray,p=e.isFunction,m=e.isObject,v=e.keys,b=e.isUndefined,y=Math.ceil,S=Math.floor,P=Math.max,x=t.Collection.prototype,w=/[\s'"]/g,_=/[<>\s'"]/g,C=t.PageableCollection=t.Collection.extend({state:{firstPage:1,lastPage:null,currentPage:null,pageSize:25,totalPages:null,totalRecords:null,sortKey:null,order:-1},mode:"server",queryParams:{currentPage:"page",pageSize:"per_page",totalPages:"total_pages",totalRecords:"total_entries",sortKey:"sort_by",order:"order",directions:{"-1":"asc",1:"desc"}},constructor:function(e,t){x.constructor.apply(this,arguments),t=t||{};var i=this.mode=t.mode||this.mode||R.mode,s=r({},R.queryParams,this.queryParams,t.queryParams||{});s.directions=r({},R.queryParams.directions,this.queryParams.directions,s.directions),this.queryParams=s;var n=this.state=r({},R.state,this.state,t.state);n.currentPage=null==n.currentPage?n.firstPage:n.currentPage,f(e)||(e=e?[e]:[]),e=e.slice(),"server"==i||null!=n.totalRecords||h(e)||(n.totalRecords=this.length),this.switchMode(i,r({fetch:!1,resetState:!1,models:e},t));var o=t.comparator;if(n.sortKey&&!o&&this.setSorting(n.sortKey,n.order,t),"server"!=i){var l=this.fullCollection;o&&t.full&&(this.comparator=null,l.comparator=o),t.full&&l.sort(),h(e)||this.getPage(n.currentPage)}this._initState=a(this.state)},_makeFullCollection:function(e,i){var s,n,r,o=["url","model","sync","comparator"],a=this.constructor.prototype,l={};for(s=0,n=o.length;n>s;s++)r=o[s],b(a[r])||(l[r]=a[r]);var c=new(t.Collection.extend(l))(e,i);for(s=0,n=o.length;n>s;s++)r=o[s],this[r]!==a[r]&&(c[r]=this[r]);return c},_makeCollectionEventHandler:function(e,t){return function(i,s,o,c){var u=e._handlers;l(v(u),function(i){var s=u[i];e.off(i,s),t.off(i,s)});var h=a(e.state),d=h.firstPage,g=0===d?h.currentPage:h.currentPage-1,f=h.pageSize,p=g*f,m=p+f;if("add"==i){var S,P,x,w,c=c||{};if(o==t)P=t.indexOf(s),P>=p&&m>P&&(w=e,S=x=P-p);else{S=e.indexOf(s),P=p+S,w=t;var x=b(c.at)?P:c.at+p}if(c.onRemove||(++h.totalRecords,delete c.onRemove),e.state=e._checkState(h),w){w.add(s,r({},c,{at:x}));var _=S>=f?s:!b(c.at)&&m>x&&e.length>f?e.at(f):null;_&&n(o,i,function(){e.remove(_,{onAdd:!0})})}c.silent||e.trigger("pageable:state:change",e.state)}if("remove"==i){if(c.onAdd)delete c.onAdd;else{if(--h.totalRecords){var C=h.totalPages=y(h.totalRecords/f);h.lastPage=0===d?C-1:C||d,h.currentPage>C&&(h.currentPage=h.lastPage)}else h.totalRecords=null,h.totalPages=null;e.state=e._checkState(h);var R,q=c.index;o==e?((R=t.at(m))?n(e,i,function(){e.push(R,{onRemove:!0})}):!e.length&&h.totalRecords&&e.reset(t.models.slice(p-f,m-f),r({},c,{parse:!1})),t.remove(s)):q>=p&&m>q&&((R=t.at(m-1))&&n(e,i,function(){e.push(R,{onRemove:!0})}),e.remove(s),!e.length&&h.totalRecords&&e.reset(t.models.slice(p-f,m-f),r({},c,{parse:!1})))}c.silent||e.trigger("pageable:state:change",e.state)}if("reset"==i){if(c=o,o=s,o==e&&null==c.from&&null==c.to){var k=t.models.slice(0,p),N=t.models.slice(p+e.models.length);t.reset(k.concat(e.models).concat(N),c)}else o==t&&((h.totalRecords=t.models.length)||(h.totalRecords=null,h.totalPages=null),"client"==e.mode&&(d=h.lastPage=h.currentPage=h.firstPage,g=0===d?h.currentPage:h.currentPage-1,p=g*f,m=p+f),e.state=e._checkState(h),e.reset(t.models.slice(p,m),r({},c,{parse:!1})));c.silent||e.trigger("pageable:state:change",e.state)}"sort"==i&&(c=o,o=s,o===t&&e.reset(t.models.slice(p,m),r({},c,{parse:!1}))),l(v(u),function(i){var s=u[i];l([e,t],function(e){e.on(i,s);var t=e._events[i]||[];t.unshift(t.pop())})})}},_checkState:function(e){var t=this.mode,s=this.links,n=e.totalRecords,r=e.pageSize,o=e.currentPage,a=e.firstPage,l=e.totalPages;if(null!=n&&null!=r&&null!=o&&null!=a&&("infinite"==t?s:!0)){if(n=i(n,"totalRecords"),r=i(r,"pageSize"),o=i(o,"currentPage"),a=i(a,"firstPage"),1>r)throw new RangeError("`pageSize` must be >= 1");if(l=e.totalPages=y(n/r),0>a||a>1)throw new RangeError("`firstPage must be 0 or 1`");if(e.lastPage=0===a?P(0,l-1):l||a,"infinite"==t){if(!s[o])throw new RangeError("No link found for page "+o)}else if(a>o||l>0&&(a?o>l:o>=l))throw new RangeError("`currentPage` must be firstPage <= currentPage "+(a?"<":"<=")+" totalPages if "+a+"-based. Got "+o+".")}return e},setPageSize:function(e,t){e=i(e,"pageSize"),t=t||{first:!1};var s=this.state,n=y(s.totalRecords/e),a=n?P(s.firstPage,S(n*s.currentPage/s.totalPages)):s.firstPage;return s=this.state=this._checkState(r({},s,{pageSize:e,currentPage:t.first?s.firstPage:a,totalPages:n})),this.getPage(s.currentPage,o(t,["first"]))},switchMode:function(t,i){if(!u(["server","client","infinite"],t))throw new TypeError('`mode` must be one of "server", "client" or "infinite"');i=i||{fetch:!0,resetState:!0};var s=this.state=i.resetState?a(this._initState):this._checkState(r({},this.state));this.mode=t;var n,c=this,h=this.fullCollection,d=this._handlers=this._handlers||{};if("server"==t||h)"server"==t&&h&&(l(v(d),function(e){n=d[e],c.off(e,n),h.off(e,n)}),delete this._handlers,this._fullComparator=h.comparator,delete this.fullCollection);else{h=this._makeFullCollection(i.models||[],i),h.pageableCollection=this,this.fullCollection=h;var g=this._makeCollectionEventHandler(this,h);l(["add","remove","reset","sort"],function(t){d[t]=n=e.bind(g,{},t),c.on(t,n),h.on(t,n)}),h.comparator=this._fullComparator}if("infinite"==t)for(var f=this.links={},p=s.firstPage,m=y(s.totalRecords/s.pageSize),b=0===p?P(0,m-1):m||p,S=s.firstPage;b>=S;S++)f[S]=this.url;else this.links&&delete this.links;return i.silent||this.trigger("pageable:state:change",s),i.fetch?this.fetch(o(i,"fetch","resetState")):this},hasPreviousPage:function(){var e=this.state,t=e.currentPage;return"infinite"!=this.mode?t>e.firstPage:!!this.links[t-1]},hasNextPage:function(){var e=this.state,t=this.state.currentPage;return"infinite"!=this.mode?t<e.lastPage:!!this.links[t+1]},getFirstPage:function(e){return this.getPage("first",e)},getPreviousPage:function(e){return this.getPage("prev",e)},getNextPage:function(e){return this.getPage("next",e)},getLastPage:function(e){return this.getPage("last",e)},getPage:function(e,t){var s=this.mode,n=this.fullCollection;t=t||{fetch:!1};var a=this.state,l=a.firstPage,c=a.currentPage,u=a.lastPage,d=a.pageSize,g=e;switch(e){case"first":g=l;break;case"prev":g=c-1;break;case"next":g=c+1;break;case"last":g=u;break;default:g=i(e,"index")}this.state=this._checkState(r({},a,{currentPage:g})),t.silent||this.trigger("pageable:state:change",this.state),t.from=c,t.to=g;var f=(0===l?g:g-1)*d,p=n&&n.length?n.models.slice(f,f+d):[];return"client"!=s&&("infinite"!=s||h(p))||t.fetch?("infinite"==s&&(t.url=this.links[g]),this.fetch(o(t,"fetch"))):(this.reset(p,o(t,"fetch")),this)},getPageByOffset:function(e,t){if(0>e)throw new RangeError("`offset must be > 0`");e=i(e,"offset");var s=S(e/this.state.pageSize);return 0!==this.state.firstPage&&s++,s>this.state.lastPage&&(s=this.state.lastPage),this.getPage(s,t)},sync:function(e,i,s){var n=this;if("infinite"==n.mode){var o=s.success,a=n.state.currentPage;s.success=function(e,t,i){var l=n.links,c=n.parseLinks(e,r({xhr:i},s));c.first&&(l[n.state.firstPage]=c.first),c.prev&&(l[a-1]=c.prev),c.next&&(l[a+1]=c.next),o&&o(e,t,i)}}return(x.sync||t.sync).call(n,e,i,s)},parseLinks:function(e,t){var i={},s=t.xhr.getResponseHeader("Link");if(s){var n=["first","prev","next"];l(s.split(","),function(e){var t=e.split(";"),s=t[0].replace(_,""),r=t.slice(1);l(r,function(e){var t=e.split("="),r=t[0].replace(w,""),o=t[1].replace(w,"");"rel"==r&&u(n,o)&&(i[o]=s)})})}return i},parse:function(e,t){var i=this.parseState(e,a(this.queryParams),a(this.state),t);return i&&(this.state=this._checkState(r({},this.state,i)),(t||{}).silent||this.trigger("pageable:state:change",this.state)),this.parseRecords(e,t)},parseState:function(t,i,s,n){if(t&&2===t.length&&m(t[0])&&f(t[1])){var r=a(s),c=t[0];return l(d(o(i,"directions")),function(t){var i=t[0],s=t[1],n=c[s];b(n)||e.isNull(n)||(r[i]=c[s])}),c.order&&(r.order=1*g(i.directions)[c.order]),r}},parseRecords:function(e,t){return e&&2===e.length&&m(e[0])&&f(e[1])?e[1]:e},fetch:function(t){t=t||{};var i=this._checkState(this.state),n=this.mode;"infinite"!=n||t.url||(t.url=this.links[i.currentPage]);var a=t.data||{},u=t.url||this.url||"";p(u)&&(u=u.call(this));var h=u.indexOf("?");-1!=h&&(r(a,s(u.slice(h+1))),u=u.slice(0,h)),t.url=u,t.data=a;var g="client"==this.mode?c(this.queryParams,"sortKey"):o(c(this.queryParams,v(R.queryParams)),"order","directions","totalPages","totalRecords");l(g,function(t,s){t=p(t)?t.call(this):t,null!=i[s]&&null!=t&&e.isUndefined(a[t])&&(a[t]=i[s])},this);var m=p(this.queryParams.sortKey)?this.queryParams.sortKey.call(this):this.queryParams.sortKey,y=p(this.queryParams.order)?this.queryParams.order.call(this):this.queryParams.order;if(null!=m&&null!=i.sortKey&&null!=y&&null!=i.order)if(f(i.order)){a[y]=[];for(var S=0;S<i.order.length;S++)a[y].push(this.queryParams.directions[i.order[S]])}else a[y]=this.queryParams.directions[i.order+""];for(var P=d(o(this.queryParams,v(R.queryParams))),S=0;S<P.length;S++){var w=P[S],_=w[1];_=p(_)?_.call(this):_,null!=_&&(a[w[0]]=_)}if("server"!=n){var C=this,q=this.fullCollection,k=t.success;return t.success=function(e,i,s){s=s||{},b(t.silent)?delete s.silent:s.silent=t.silent;var o=e.models;"client"==n?q.reset(o,s):(q.add(o,r({at:q.length},r(s,{parse:!1}))),C.trigger("reset",C,s)),k&&k(e,i,s)},x.fetch.call(this,r({},t,{silent:!0}))}return x.fetch.call(this,t)},_makeComparator:function(e,t,i){var s=this.state;return e=e||s.sortKey,t=t||s.order,e&&t?(i||(i=function(e,t){return e.get(t)}),function(s,n){var r,o=i(s,e),a=i(n,e);return 1===t&&(r=o,o=a,a=r),o===a?0:a>o?-1:1}):void 0},setSorting:function(e,t,i){var s=this.state;s.sortKey=e,s.order=t=t||s.order;var n=this.fullCollection,o=!1,a=!1;e||(o=a=!0);var l=this.mode;i=r({side:"client"==l?l:"server",full:!0},i);var c=this._makeComparator(e,t,i.sortValue),u=i.full,h=i.side;return"client"==h?u?(n&&(n.comparator=c),o=!0):(this.comparator=c,a=!0):"server"!=h||u||(this.comparator=c),o&&(this.comparator=null),a&&n&&(n.comparator=null),this}}),R=C.prototype;return C}),function(e){"use strict";RequireJS.define("edx-ui-toolkit/js/pagination/paging-collection",["jquery","underscore","backbone.paginator"],function(e,t,i){var s=i.extend({mode:"server",isStale:!1,sortableFields:{},filterableFields:{},state:{firstPage:1,pageSize:10,sortKey:null},queryParams:{currentPage:"page",pageSize:"page_size",totalRecords:"count",totalPages:"num_pages",sortKey:"order_by",order:"sort_order"},constructor:function(e,n){this.state=t.extend({},s.prototype.state,this.state),this.queryParams=t.extend({},s.prototype.queryParams,this.queryParams),i.prototype.constructor.call(this,e,n)},initialize:function(e,t){this.sortableFields={},this.filterableFields={},i.prototype.initialize.call(this,e,t)},parse:function(e,s){var n=[];return n.push(t.omit(e,"results")),n.push(e.results),i.prototype.parse.call(this,n,s)},getPageNumber:function(){return this.state.currentPage+(1-this.state.firstPage)},getTotalPages:function(){return this.state.totalPages},getTotalRecords:function(){return this.state.totalRecords},getPageSize:function(){return this.state.pageSize},setPage:function(t){var i=this.state.currentPage,s=this,n=e.Deferred();return this.getPage(t-(1-this.state.firstPage),{reset:!0}).then(function(){s.isStale=!1,s.trigger("page_changed"),n.resolve()},function(){s.state.currentPage=i,n.fail()}),n.promise()},refresh:function(){var t=e.Deferred();return this.isStale?this.setPage(1).done(function(){t.resolve()}):t.resolve(),t.promise()},hasNextPage:function(){return this.getPageNumber()<this.state.totalPages},hasPreviousPage:function(){return this.getPageNumber()>1},nextPage:function(){this.hasNextPage()&&this.setPage(this.getPageNumber()+1)},previousPage:function(){this.hasPreviousPage()&&this.setPage(this.getPageNumber()-1)},registerSortableField:function(e,t){this.addField(this.sortableFields,e,t)},registerFilterableField:function(e,t){this.addField(this.filterableFields,e,t)},addField:function(e,i,s){var n={};n[i]={displayName:s},t.extend(e,n)},sortDisplayName:function(){return this.state.sortKey?this.sortableFields[this.state.sortKey].displayName:""},filterDisplayName:function(e){return t.isUndefined(this.filterableFields[e])?"":this.filterableFields[e].displayName},setSortField:function(e,t){var i=t?0-this.state.order:this.state.order;(e!==this.state.sortKey||t)&&(this.setSorting(e,i),this.isStale=!0)},sortDirection:function(){return-1===this.state.order?s.SortDirection.ASCENDING:s.SortDirection.DESCENDING},setSortDirection:function(e){var t=this.state.order,i=t;e===s.SortDirection.ASCENDING?i=-1:e===s.SortDirection.DESCENDING&&(i=1),i!==t&&(this.setSorting(this.state.sortKey,i),this.isStale=!0)},flipSortDirection:function(){this.setSorting(this.state.sortKey,0-this.state.order),this.isStale=!0},hasRegisteredFilterField:function(e){return t.has(this.filterableFields,e)&&!t.isUndefined(this.filterableFields[e].displayName)},hasSetFilterField:function(e){return t.has(this.filterableFields,e)&&!t.isNull(this.filterableFields[e].value)},getActiveFilterFields:function(e){var i=t.chain(this.filterableFields).pick(function(e){return!t.isNull(e.value)&&!t.isUndefined(e.value)}).mapObject(function(e){return e.value});return e||(i=i.omit(s.DefaultSearchKey)),i.value()},getFilterFieldValue:function(e){var i=this.getActiveFilterFields(!0)[e];return t.isNull(i)||t.isUndefined(i)?null:i},setFilterField:function(e,i){var s;this.hasRegisteredFilterField(e)||this.registerFilterableField(e,""),this.filterableFields[e].value=i,s=t.isArray(i)?i.join(","):i,this.queryParams[e]=function(){return s||null},this.isStale=!0},unsetFilterField:function(e){this.hasSetFilterField(e)&&this.setFilterField(e,null)},unsetAllFilterFields:function(){t.each(t.keys(this.filterableFields),t.bind(this.unsetFilterField,this))},getSearchString:function(){return this.getFilterFieldValue(s.DefaultSearchKey)},hasActiveSearch:function(){var e=this.getSearchString();return!t.isNull(e)&&""!==e},setSearchString:function(e){e!==this.getSearchString()&&this.setFilterField(s.DefaultSearchKey,e)},unsetSearchString:function(){this.unsetFilterField(s.DefaultSearchKey)}},{DefaultSearchKey:"text_search",SortDirection:{ASCENDING:"asc",DESCENDING:"desc"}});return s})}.call(this,"function"==typeof RequireJS.define&&RequireJS.define.amd?RequireJS.define:RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/utils/utils",[],function(e,t){var i=function(e){return(e+"").replace(/(\r\n|\n\r|\r|\n)/g,"<br>")};return{nl2br:i}})}.call(this,define||RequireJS.define),function(e){"use strict";RequireJS.define("js/edxnotes/models/note",["backbone","js/edxnotes/utils/utils","underscore.string"],function(e,t,i){var s=e.Model.extend({defaults:{id:null,created:"",updated:"",user:"",usage_id:"",course_id:"",text:"",quote:"",ranges:[],tags:[],unit:{display_name:"",url:"",location:""},section:{display_name:"",location:"",children:[]},chapter:{display_name:"",location:"",index:0,children:[]},is_expanded:!1,show_link:!1},textSize:300,initialize:function(){this.get("quote").length>this.textSize&&this.set("show_link",!0)},getQuote:function(){var e=this.get("quote");return!this.get("is_expanded")&&this.get("show_link")&&(e=i.prune(e,this.textSize)),e}});return s})}.call(this,define||RequireJS.define),function(e){"use strict";RequireJS.define("js/edxnotes/collections/notes",["underscore","edx-ui-toolkit/js/pagination/paging-collection","js/edxnotes/models/note"],function(e,t,i){return t.extend({model:i,state:{pageSize:10},queryParams:{},constructor:function(e,i){this.url=i.url,this.state.pageSize=i.perPage,i.text&&(this.queryParams.text=i.text),t.prototype.constructor.call(this,e,i)},getCourseStructure:function(){var t=null;return function(){var i={},s={},n={};return this.each(function(e){var t=e.get("chapter"),r=e.get("section"),o=e.get("unit");i[t.location]=t,s[r.location]=r,n[o.location]=n[o.location]||[],n[o.location].push(e)}),t={chapters:e.sortBy(e.toArray(i),function(e){return e.index}),sections:s,units:n}}}()})})}.call(this,define||RequireJS.define),function(e){"use strict";RequireJS.define("js/edxnotes/utils/logger",["underscore","logger"],function(e,t){var i,s,n,r=[];return s=function(){return performance&&performance.now?performance.now():Date.now?Date.now():(new Date).getTime()},n=function(e){for(var t,i=r.length;i--;)if(r[i].id===e.id){t=r.splice(i,1)[0],t.historyStorage=[],t.timeStorage={};break}},i=function(e,t){this.id=e,this.historyStorage=[],this.timeStorage={},this.logLevel=t},i.prototype._log=function(e,t){return this.logLevel?(this.updateHistory.apply(this,arguments),Array.prototype.unshift.call(t,this.id),void(console&&console[e]&&(console[e].apply?console[e].apply(console,t):console[e](t.join(" "))))):!1},i.prototype.log=function(){this._log("log",arguments)},i.prototype.error=function(){this._log("error",arguments)},i.prototype.updateHistory=function(){this.historyStorage.push(arguments)},i.prototype.getHistory=function(){return this.historyStorage},i.prototype.time=function(e){this.timeStorage[e]=s()},i.prototype.timeEnd=function(e){return this.timeStorage[e]?(this._log("log",[e,s()-this.timeStorage[e],"ms"]),void delete this.timeStorage[e]):null},i.prototype.destroy=function(){n(this)},i.prototype.emit=function(e,i,s){var n=[e,i];return this.log(e,i),s&&n.push(null,{timeout:s}),t.log.apply(t,n)},{getLogger:function(e,t){var s=new i(e,t);return r.push(s),s},destroyLogger:n}})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/models/tab",["underscore","backbone","js/edxnotes/utils/logger"],function(e,t,i){var s=t.Model.extend({defaults:{identifier:"",name:"",icon:"",is_active:!1,is_closable:!1,view:""},initialize:function(){this.logger=i.getLogger("tab")},activate:function(){this.collection.each(e.bind(function(e){e!==this&&e.inactivate()},this)),this.set("is_active",!0),this.logger.emit("edx.course.student_notes.notes_page_viewed",{view:this.get("view")})},inactivate:function(){this.set("is_active",!1)},isActive:function(){return this.get("is_active")}});return s})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/collections/tabs",["backbone","js/edxnotes/models/tab"],function(e,t){var i=e.Collection.extend({model:t});return i})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/utils/template",["jquery","underscore"],function(e,t){var i=function(i){var s="#"+i+"-tpl",n=e(s).text();return n||console.error("Failed to load "+i+" template"),t.template(n)};return{loadTemplate:i}})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tab_item",["gettext","underscore","jquery","backbone","js/edxnotes/utils/template"],function(e,t,i,s,n){var r=s.View.extend({tagName:"li",className:"tab",activeClassName:"is-active",events:{click:"selectHandler","click a":function(e){e.preventDefault()},"click .action-close":"closeHandler"},initialize:function(t){this.template=n.loadTemplate("tab-item"),this.$el.attr("id",this.model.get("identifier")),this.listenTo(this.model,{"change:is_active":function(t,s){this.$el.toggleClass(this.activeClassName,s),s?this.$(".tab-label").prepend(i("<span />",{"class":"tab-aria-label sr",text:e("Current tab")})):this.$(".tab-aria-label").remove()},destroy:this.remove})},render:function(){var e=this.template(this.model.toJSON());return this.$el.html(e),this},selectHandler:function(e){e.preventDefault(),this.model.isActive()||this.model.activate()},closeHandler:function(e){e.preventDefault(),e.stopPropagation(),this.model.destroy()}});return r})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tabs_list",["underscore","backbone","js/edxnotes/views/tab_item"],function(e,t,i){var s=t.View.extend({tagName:"ul",className:"tabs",initialize:function(e){this.options=e,this.listenTo(this.collection,{add:this.createTab,destroy:function(e,t){e.isActive()&&t.length&&t.at(0).activate()}})},render:function(){return this.collection.each(this.createTab,this),this.collection.length&&this.collection.at(0).activate(),this},createTab:function(e){var t=new i({model:e});return t.render().$el.appendTo(this.$el),t}});return s})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/note_item",["jquery","underscore","backbone","js/edxnotes/utils/template","js/edxnotes/utils/logger"],function(e,t,i,s,n){var r=i.View.extend({tagName:"article",className:"note",id:function(){return"note-"+t.uniqueId()},events:{"click .note-excerpt-more-link":"moreHandler","click .reference-unit-link":"unitLinkHandler","click .reference-tags":"tagHandler"},initialize:function(e){this.options=t.extend({},e),this.template=s.loadTemplate("note-item"),this.logger=n.getLogger("note_item",e.debug),this.listenTo(this.model,"change:is_expanded",this.render)},render:function(){var e=this.getContext();return this.$el.html(this.template(e)),this},getContext:function(){return e.extend({},this.model.toJSON(),{message:this.model.getQuote()})},toggleNote:function(){var e=!this.model.get("is_expanded");this.model.set("is_expanded",e)},moreHandler:function(e){e.preventDefault(),this.toggleNote()},unitLinkHandler:function(e){var i=2e3;e.preventDefault(),this.logger.emit("edx.course.student_notes.used_unit_link",{note_id:this.model.get("id"),component_usage_id:this.model.get("usage_id"),view:this.options.view},i).always(t.bind(function(){this.redirectTo(e.target.href)},this))},tagHandler:function(e){e.preventDefault(),t.isUndefined(this.options.scrollToTag)||this.options.scrollToTag(e.currentTarget.text)},redirectTo:function(e){window.location=e},remove:function(){return this.logger.destroy(),i.View.prototype.remove.call(this),this}});return r})}.call(this,define||RequireJS.define),RequireJS.define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),RequireJS.define("text!common/templates/components/paging-header.underscore",[],function(){return'<% if (!_.isUndefined(srInfo)) { %>\n  <h3 class="sr" id="<%- srInfo.id %>"><%- srInfo.text %></h3>\n<% } %>\n<div class="search-tools listing-tools">\n    <span class="search-count listing-count">\n        <%- message %>\n    </span>\n    <% if (showSortControls) { %>\n      |\n      <span class="field listing-sort">\n          <label class="field-label" for="paging-header-select"><%- gettext("Sorted by") %></label>\n          <select id="paging-header-select" name="paging-header-select" class="field-input input-select listing-sort-select">\n              <% _.each(sortableFields, function (option, key) { %>\n                <option value="<%- key %>" <% if (key === sortOrder) { %> selected="true" <% } %>>\n                  <%- option.displayName %>\n                </option>\n              <% }) %>\n          </select>\n      </span>\n    <% } %>\n</div>\n'}),function(e){"use strict";RequireJS.define("common/js/components/views/paging_header",["backbone","underscore","gettext","edx-ui-toolkit/js/utils/html-utils","edx-ui-toolkit/js/utils/string-utils","text!common/templates/components/paging-header.underscore"],function(e,t,i,s,n,r){var o=e.View.extend({initialize:function(e){this.srInfo=e.srInfo,this.showSortControls=e.showSortControls,this.collection.bind("add",t.bind(this.render,this)),this.collection.bind("remove",t.bind(this.render,this)),this.collection.bind("reset",t.bind(this.render,this))},events:{"change #paging-header-select":"sortCollection"},render:function(){var e,t=(this.collection.getPageNumber()-1)*this.collection.getPageSize(),o=t+this.collection.size(),a=this.collection.getTotalRecords(),l={firstIndex:Math.min(t+1,o),lastIndex:o,numItems:a};return e=1>=o?n.interpolate(i("Showing {firstIndex} out of {numItems} total"),l):n.interpolate(i("Showing {firstIndex}-{lastIndex} out of {numItems} total"),l),s.setHtml(this.$el,s.template(r)({message:e,srInfo:this.srInfo,sortableFields:this.collection.sortableFields,sortOrder:this.sortOrder,showSortControls:this.showSortControls})),this},sortCollection:function(){var e=this.$("#paging-header-select option:selected");return this.sortOrder=e.attr("value"),this.collection.setSortField(this.sortOrder),this.collection.refresh()}});return o})}.call(this,define||RequireJS.define),RequireJS.define("text!common/templates/components/paging-footer.underscore",[],function(){return'<nav class="pagination pagination-full bottom" aria-label="<%= paginationLabel %>">\n    <div class="nav-item previous"><button class="nav-link previous-page-link"><span class="icon fa fa-angle-left" aria-hidden="true"></span> <span class="nav-label"><%= gettext("Previous") %></span></button></div>\n    <div class="nav-item page">\n        <div class="pagination-form">\n            <label class="page-number-label" for="page-number-input"><%= interpolate(\n                    gettext("Page number out of %(total_pages)s"),\n                    {total_pages: total_pages},\n                    true\n                )%></label>\n            <input id="page-number-input" class="page-number-input" name="page-number" type="text" size="4" autocomplete="off" aria-describedby="page-number-input-helper"/>\n            <span class="sr field-helper" id="page-number-input-helper"><%= gettext("Enter the page number you\'d like to quickly navigate to.") %></span>\n        </div>\n\n        <span class="current-page"><%= current_page %></span>\n        <span class="sr">&nbsp;out of&nbsp;</span>\n        <span class="page-divider" aria-hidden="true">/</span>\n        <span class="total-pages"><%= total_pages %></span>\n    </div>\n    <div class="nav-item next"><button class="nav-link next-page-link"><span class="nav-label"><%= gettext("Next") %></span> <span class="icon fa fa-angle-right" aria-hidden="true"></span></button></div>\n</nav>\n'}),function(e){"use strict";RequireJS.define("common/js/components/views/paging_footer",["underscore","gettext","backbone","edx-ui-toolkit/js/utils/html-utils","text!common/templates/components/paging-footer.underscore"],function(e,t,i,s,n){var r=i.View.extend({events:{"click .next-page-link":"nextPage","click .previous-page-link":"previousPage","change .page-number-input":"changePage"},initialize:function(i){this.collection=i.collection,this.hideWhenOnePage=i.hideWhenOnePage||!1,this.paginationLabel=i.paginationLabel||t("Pagination"),this.collection.bind("add",e.bind(this.render,this)),this.collection.bind("remove",e.bind(this.render,this)),this.collection.bind("reset",e.bind(this.render,this))},render:function(){var e=!this.collection.hasPreviousPage(),t=!this.collection.hasNextPage();return this.hideWhenOnePage&&(this.collection.getTotalPages()<=1?this.$el.addClass("hidden"):this.$el.hasClass("hidden")&&this.$el.removeClass("hidden")),s.setHtml(this.$el,s.template(n)({current_page:this.collection.getPageNumber(),total_pages:this.collection.getTotalPages(),paginationLabel:this.paginationLabel})),this.$(".previous-page-link").toggleClass("is-disabled",e).attr("aria-disabled",e),this.$(".next-page-link").toggleClass("is-disabled",t).attr("aria-disabled",t),this},changePage:function(){var e=this.collection,t=e.getPageNumber(),i=this.$("#page-number-input"),s=parseInt(i.val(),10),n=!0;(!s||s>e.getTotalPages()||1>s)&&(n=!1),n&&s!==t&&e.setPage(s),i.val("")},nextPage:function(){this.collection.nextPage()},previousPage:function(){this.collection.previousPage()}});return r})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tab_panel",["gettext","underscore","backbone","js/edxnotes/views/note_item","common/js/components/views/paging_header","common/js/components/views/paging_footer"],function(e,t,i,s,n,r){var o=i.View.extend({tagName:"section",className:"tab-panel",title:"",titleTemplate:t.template('<h2 class="sr"><%- text %></h2>'),attributes:{tabindex:-1},initialize:function(e){this.children=[],this.options=t.extend({},e),this.options.createHeaderFooter&&(this.pagingHeaderView=new n({collection:this.collection}),this.pagingFooterView=new r({collection:this.collection,hideWhenOnePage:!0})),this.hasOwnProperty("collection")&&this.listenTo(this.collection,"page_changed",this.render)},render:function(){return this.$el.html(this.getTitle()),this.renderView(this.pagingHeaderView),this.renderContent(),this.renderView(this.pagingFooterView),this},renderView:function(e){this.options.createHeaderFooter&&this.collection.models.length&&(this.$el.append(e.render().el),e.delegateEvents())},renderContent:function(){return this},getNotes:function(e){var i=document.createDocumentFragment(),n=this.options.scrollToTag,r=this.title,o=t.map(e,function(e){var t=new s({model:e,scrollToTag:n,view:r});return i.appendChild(t.render().el),t});return this.children=this.children.concat(o),i},getTitle:function(){return this.title?this.titleTemplate({text:e(this.title)}):""},remove:function(){return t.invoke(this.children,"remove"),this.children=null,i.View.prototype.remove.call(this),this}});return o})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tab_view",["jquery","underscore","backbone","edx-ui-toolkit/js/utils/html-utils","js/edxnotes/models/tab"],function(e,t,i,s,n){var r=i.View.extend({PanelConstructor:null,tabInfo:{name:"",class_name:""},initialize:function(e){t.bindAll(this,"showLoadingIndicator","hideLoadingIndicator"),this.options=t.defaults(e||{},{createTabOnInitialization:!0,createHeaderFooter:!0}),this.options.createTabOnInitialization&&this.createTab()},createTab:function(){this.tabModel=new n(this.tabInfo),this.options.tabsCollection.add(this.tabModel),this.listenTo(this.tabModel,{"change:is_active":function(e,t){t?this.render():this.destroySubView()},destroy:function(){this.destroySubView(),this.tabModel=null,this.onClose()}})},render:function(){return this.hideErrorMessage().showLoadingIndicator(),this.destroySubView(),this.renderContent().always(this.hideLoadingIndicator),this.$(".sr-is-focusable.sr-tab-panel").focus(),this},renderContent:function(){return this.contentView=this.getSubView(),this.$(".wrapper-tabs").append(this.contentView.render().$el),e.Deferred().resolve().promise()},getSubView:function(){var e=this.getCollection();return new this.PanelConstructor({collection:e,scrollToTag:this.options.scrollToTag,createHeaderFooter:this.options.createHeaderFooter})},destroySubView:function(){this.contentView&&(this.contentView.remove(),this.contentView=null)},getCollection:function(){return this.collection},onClose:function(){},getLoadingIndicator:function(){return this.$(".ui-loading")},showLoadingIndicator:function(){return this.getLoadingIndicator().removeClass("is-hidden"),this},hideLoadingIndicator:function(){return this.getLoadingIndicator().addClass("is-hidden"),this},showErrorMessageHtml:function(e){var t=this.$(".wrapper-msg");
return t.removeClass("is-hidden"),s.setHtml(t.find(".msg-content .copy"),e),this},hideErrorMessage:function(){return this.$(".wrapper-msg").addClass("is-hidden").find(".msg-content .copy").html(""),this}});return r})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tabs/recent_activity",["gettext","js/edxnotes/views/tab_panel","js/edxnotes/views/tab_view"],function(e,t,i){var s="Recent Activity",n=i.extend({PanelConstructor:t.extend({id:"recent-panel",title:s,className:function(){return[t.prototype.className,"note-group"].join(" ")},renderContent:function(){return this.$el.append(this.getNotes(this.collection.toArray())),this}}),tabInfo:{identifier:"view-recent-activity",name:e("Recent Activity"),icon:"fa fa-clock-o",view:s}});return n})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/note_group",["gettext","underscore","backbone"],function(e,t,i){var s,n;return s=i.View.extend({tagName:"section",id:function(){return"note-section-"+t.uniqueId()},initialize:function(e){this.options=t.extend({},e),this.template=t.template(this.options.template),this.className=this.options.className},render:function(){return this.$el.prepend(this.template({displayName:this.options.displayName})),this},addChild:function(e){this.$el.append(e)}}),n=i.View.extend({tagName:"section",className:"note-group",id:function(){return"note-group-"+t.uniqueId()},template:t.template('<h3 class="course-title"><%- chapterName %></h3>'),initialize:function(e){this.children=[],this.options=t.extend({},e)},render:function(){var e=document.createDocumentFragment();return this.$el.html(this.template({chapterName:this.options.chapter.display_name||""})),t.each(this.children,function(t){e.appendChild(t.render().el)}),this.$el.append(e),this},addChild:function(e){var t=new s({displayName:e.display_name,template:'<h4 class="course-subtitle"><%- displayName %></h4>',className:"note-section"});return this.children.push(t),t},remove:function(){return t.invoke(this.children,"remove"),this.children=null,i.View.prototype.remove.call(this),this}}),{GroupView:s,ChapterView:n}})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tabs/course_structure",["gettext","underscore","js/edxnotes/views/note_group","js/edxnotes/views/tab_panel","js/edxnotes/views/tab_view"],function(e,t,i,s,n){var r="Location in Course",o=n.extend({PanelConstructor:s.extend({id:"structure-panel",title:r,renderContent:function(){var e=this.collection.getCourseStructure(),i=document.createDocumentFragment();return t.each(e.chapters,function(s){var n=this.getChapterGroupView(s);t.each(s.children,function(i){var s,r=e.sections[i];r&&(s=n.addChild(r),t.each(r.children,function(t){var i=e.units[t];i&&s.addChild(this.getNotes(i))},this))},this),i.appendChild(n.render().el)},this),this.$el.append(i),this},getChapterGroupView:function(e,t){var s=new i.ChapterView({chapter:e,section:t});return this.children.push(s),s}}),tabInfo:{name:e("Location in Course"),identifier:"view-course-structure",icon:"fa fa-list-ul",view:r}});return o})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/search_box",["jquery","underscore","backbone","gettext","edx-ui-toolkit/js/utils/html-utils","js/edxnotes/utils/logger","js/edxnotes/collections/notes"],function(e,t,i,s,n,r,o){var a=i.View.extend({events:{submit:"submitHandler"},errorMessage:s("An error has occurred. Make sure that you are connected to the Internet, and then try refreshing the page."),emptyFieldMessageHtml:function(){var e=s("Please enter a term in the {anchorStart} search field{anchorEnd}.");return n.interpolateHtml(e,{anchorStart:n.HTML('<a href="#search-notes-input">'),anchorEnd:n.HTML("</a>")})}(),initialize:function(e){t.bindAll(this,"onSuccess","onError","onComplete"),this.options=t.defaults(e||{},{beforeSearchStart:function(){},search:function(){},error:function(){},complete:function(){}}),this.logger=r.getLogger("search_box",this.options.debug),this.$el.removeClass("is-hidden"),this.isDisabled=!1,this.searchInput=this.$el.find("#search-notes-input"),this.logger.log("initialized")},clearInput:function(){this.searchInput.val("")},submitHandler:function(e){e.preventDefault(),this.search()},prepareData:function(e){return e&&t.has(e,"count")&&t.has(e,"results")?[this.collection,this.searchQuery]:(this.logger.log("Wrong data",e,this.searchQuery),null)},getSearchQuery:function(){return this.$el.find("#search-notes-input").val()},search:function(){return this.isDisabled?!1:(this.searchQuery=this.getSearchQuery(),this.validateField(this.searchQuery)?(this.options.beforeSearchStart(this.searchQuery),this.disableForm(),this.sendRequest(this.searchQuery).done(this.onSuccess).fail(this.onError).complete(this.onComplete),!0):!1)},validateField:function(t){return e.trim(t)?!0:(this.options.error(this.emptyFieldMessageHtml,t),!1)},onSuccess:function(e){var t=this.prepareData(e);t?(this.options.search.apply(this,t),this.logger.emit("edx.course.student_notes.searched",{number_of_results:t[0].getTotalRecords(),search_string:t[1]})):this.options.error(this.errorMessage,this.searchQuery)},onError:function(t){var i,s=this.getSearchQuery();if(t.responseText)try{i=e.parseJSON(t.responseText).error}catch(n){}this.options.error(i||this.errorMessage,s),this.logger.log("Response fails",t.responseText)},onComplete:function(){this.enableForm(),this.options.complete(this.searchQuery)},enableForm:function(){this.isDisabled=!1,this.$el.removeClass("is-looking"),this.$("button[type=submit]").removeClass("is-disabled")},disableForm:function(){this.isDisabled=!0,this.$el.addClass("is-looking"),this.$("button[type=submit]").addClass("is-disabled")},sendRequest:function(e){return this.collection=new o([],{text:e,perPage:this.options.perPage,url:this.el.action}),this.collection.getPage(1)}});return a})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tabs/search_results",["jquery","underscore","gettext","js/edxnotes/views/tab_panel","js/edxnotes/views/tab_view","js/edxnotes/views/search_box"],function(e,t,i,s,n,r){var o="Search Results",a=n.extend({PanelConstructor:s.extend({id:"search-results-panel",title:o,className:function(){return[s.prototype.className,"note-group"].join(" ")},renderContent:function(){return this.$el.append(this.getNotes(this.collection.toArray())),this}}),NoResultsViewConstructor:s.extend({id:"no-results-panel",title:"No results found",className:function(){return[s.prototype.className,"note-group"].join(" ")},renderContent:function(){var t=i('No results found for "%(query_string)s". Please try searching again.');return this.$el.append(e("<p />",{text:interpolate(t,{query_string:this.options.searchQuery},!0)})),this}}),tabInfo:{identifier:"view-search-results",name:i("Search Results"),icon:"fa fa-search",is_closable:!0,view:o},initialize:function(e){this.options=t.extend({},e),t.bindAll(this,"onBeforeSearchStart","onSearch","onSearchError"),n.prototype.initialize.call(this,e),this.searchResults=null,this.searchBox=new r({el:document.getElementById("search-notes-form"),debug:this.options.debug,perPage:this.options.perPage,beforeSearchStart:this.onBeforeSearchStart,search:this.onSearch,error:this.onSearchError})},renderContent:function(){return this.getLoadingIndicator().focus(),this.searchPromise.done(t.bind(function(){this.contentView=this.getSubView(),this.contentView&&this.$(".wrapper-tabs").append(this.contentView.render().$el)},this))},getSubView:function(){var e=this.getCollection();return e?e.length?new this.PanelConstructor({collection:e,searchQuery:this.searchResults.searchQuery,scrollToTag:this.options.scrollToTag,createHeaderFooter:this.options.createHeaderFooter}):new this.NoResultsViewConstructor({searchQuery:this.searchResults.searchQuery}):null},getCollection:function(){return this.searchResults?this.searchResults.collection:null},onClose:function(){this.searchResults=null,this.searchBox.clearInput()},onBeforeSearchStart:function(){this.searchDeferred=e.Deferred(),this.searchPromise=this.searchDeferred.promise(),this.hideErrorMessage(),this.searchResults=null,this.tabModel||this.createTab(),this.tabModel.isActive()?this.render():this.tabModel.activate()},onSearch:function(e,t){this.searchResults={collection:e,searchQuery:t},this.searchDeferred&&this.searchDeferred.resolve(),this.contentView&&this.contentView.$el.focus()},onSearchError:function(e){this.showErrorMessageHtml(e),this.searchDeferred&&this.searchDeferred.reject()}});return a})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/tabs/tags",["gettext","jquery","underscore","js/edxnotes/views/note_group","js/edxnotes/views/tab_panel","js/edxnotes/views/tab_view"],function(e,i,s,n,r,o){var a="Tags",l=o.extend({scrollToTag:function(e){var t,s;this.tabModel.isActive()||this.tabModel.activate(),s=this.contentView.titleMap[e.toLowerCase()],t=this.$el.find(".tags-title").filter(function(){return i(this).text()===s}),i("html,body").animate({scrollTop:t.offset().top-10},"slow",function(){t.focus()})},initialize:function(e){this.options=s.extend({},e),o.prototype.initialize.call(this,e),s.bindAll(this,"scrollToTag"),this.options.scrollToTag=this.scrollToTag},PanelConstructor:r.extend({id:"tags-panel",title:a,noTags:e("[no tags]"),renderContent:function(){var e,i,n,r,o,a,l,c,u,h={},d=this.noTags;return e=function(e,s){i=h[s.toLowerCase()],i===t&&(i=[],h[s.toLowerCase()]=i),(0===i.length||i[i.length-1]!==e)&&i.push(e)},this.collection.each(function(t){if(n=t.get("tags"),0===n.length)e(t,d);else for(r=0;r<n.length;r++)e(t,n[r])}),o=Object.keys(h).sort(function(e,t){return e===d?1:t===d?-1:h[e].length>h[t].length?-1:h[e].length<h[t].length?1:e.toLowerCase()<=t.toLowerCase()?-1:1}),a=document.createDocumentFragment(),this.titleMap={},u=this.titleMap,s.each(o,function(e){c=h[e];var t=interpolate_text("{tagName} ({numberOfNotesWithTag})",{tagName:e,numberOfNotesWithTag:c.length});l=this.getGroup(t),u[e]=t,l.addChild(this.getNotes(c)),a.appendChild(l.render().el)},this),this.$el.append(a),this},getGroup:function(e){var t=new n.GroupView({displayName:e,template:'<h3 class="tags-title sr-is-focusable" tabindex="-1"><%- displayName %></h3>',className:"note-group"});return this.children.push(t),t}}),tabInfo:{name:e("Tags"),identifier:"view-tags",icon:"fa fa-tag",view:a}});return l})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/notes_page",["backbone","js/edxnotes/collections/tabs","js/edxnotes/views/tabs_list","js/edxnotes/views/tabs/recent_activity","js/edxnotes/views/tabs/course_structure","js/edxnotes/views/tabs/search_results","js/edxnotes/views/tabs/tags"],function(e,t,i,s,n,r,o){var a=e.View.extend({initialize:function(e){var a,l;this.options=e,this.tabsCollection=new t,_.contains(this.options.disabledTabs,"tags")||(this.tagsView=new o({el:this.el,collection:this.collection,tabsCollection:this.tabsCollection}),a=this.tagsView.scrollToTag,l=this.tabsCollection.shift()),this.recentActivityView=new s({el:this.el,collection:this.collection,tabsCollection:this.tabsCollection,scrollToTag:a}),_.contains(this.options.disabledTabs,"course_structure")||(this.courseStructureView=new n({el:this.el,collection:this.collection,tabsCollection:this.tabsCollection,scrollToTag:a})),_.contains(this.options.disabledTabs,"tags")||this.tabsCollection.push(l),this.searchResultsView=new r({el:this.el,tabsCollection:this.tabsCollection,debug:this.options.debug,perPage:this.options.perPage,createTabOnInitialization:!1,scrollToTag:a}),this.tabsView=new i({collection:this.tabsCollection}),this.$(".tab-list").append(this.tabsView.render().$el).removeClass("is-hidden")}});return a})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("js/edxnotes/views/page_factory",["jquery","js/edxnotes/collections/notes","js/edxnotes/views/notes_page"],function(e,t,i){return function(s){var n=new t(s.notes,{url:s.notesEndpoint,perPage:s.pageSize,parse:!0});return new i({el:e(".wrapper-student-notes").get(0),collection:n,debug:s.debugMode,perPage:s.pageSize,disabledTabs:s.disabledTabs})}})}.call(this,define||RequireJS.define);
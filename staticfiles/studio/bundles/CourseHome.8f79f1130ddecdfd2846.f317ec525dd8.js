!function(e,o){for(var n in o)e[n]=o[n]}(window,webpackJsonp([42],{"./openedx/features/course_experience/static/course_experience/js/CourseHome.js":function(e,o,n){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),function(e){function t(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}n.d(o,"CourseHome",function(){return c});var s=function(){function e(e,o){for(var n=0;n<o.length;n++){var t=o[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(o,n,t){return n&&e(o.prototype,n),t&&e(o,t),o}}(),c=function(){function o(n){var s=this;t(this,o),this.courseRunKey=n.courseRunKey,this.msgStateStorageKey="course_experience.upgrade_msg."+this.courseRunKey+".collapsed";var c=e(n.resumeCourseLink);c.on("click",function(e){var o=c.find("span").data("action-type");Logger.log("edx.course.home.resume_course.clicked",{event_type:o,url:e.currentTarget.href})}),e(n.courseToolLink).on("click",function(e){var o=e.srcElement.dataset["analytics-id"];Logger.log("edx.course.tool.accessed",{tool_name:o})});var r=e(".section-goals"),i=e(".section-goals .edit-icon"),a=e(".section-goals .goal"),u=e(".section-goals .edit-goal-select"),l=e(".section-goals .response-icon"),g=e(".section-goals .sr-update-response-msg"),d=e('.section-goals .title:not("label")'),f=e(".section-goals label.title");r.on("click",function(o){e(o.target).hasClass("edit-goal-select")||(u.toggle(),a.toggle(),d.toggle(),f.toggle(),l.removeClass().addClass("response-icon"),u.focus())}),e(document.body).on("keyup",".section-goals .edit-icon",function(o){13===o.which&&e(o.target).trigger("click")}),u.on("blur change",function(o){if(a.show(),d.show(),f.hide(),u.hide(),"blur"!==o.type){var t=e(o.target).val();l.removeClass().addClass("response-icon fa fa-spinner fa-spin"),e.ajax({method:"POST",url:n.goalApiUrl,headers:{"X-CSRFToken":e.cookie("csrftoken")},data:{goal_key:t,course_key:n.courseId,user:n.username},dataType:"json",success:function(e){a.find(".text").text(e.goal_text),g.text(gettext("You have successfully updated your goal.")),l.removeClass().addClass("response-icon fa fa-check")},error:function(){l.removeClass().addClass("response-icon fa fa-close"),g.text(gettext("There was an error updating your goal."))},complete:function(){setTimeout(function(){l.removeClass().addClass("response-icon")},3e3),i.focus()}})}}),e(document.body).on("click",".course-message .dismiss",function(o){e(o.target).closest(".course-message").hide()}),e(document.body).on("keyup",".course-message .dismiss",function(o){13===o.which&&e(o.target).trigger("click")}),e(document).ready(function(){s.configureUpgradeMessage(),s.configureUpgradeAnalytics()})}return s(o,[{key:"configureUpgradeAnalytics",value:function(){e(".btn-upgrade").each(function(n,t){var s={promotion_id:"courseware_verified_certificate_upsell",creative:e(t).data("creative"),name:"In-Course Verification Prompt",position:e(t).data("position")};o.fireSegmentEvent("Promotion Viewed",s),e(t).click(function(){o.fireSegmentEvent("Promotion Clicked",s)})})}},{key:"configureUpgradeMessage",value:function(){var o={courseRunKey:this.courseRunKey};Logger.log("edx.bi.course.upgrade.sidebarupsell.displayed",o),e(".section-upgrade .btn-upgrade").click(function(){Logger.log("edx.bi.course.upgrade.sidebarupsell.clicked",o),Logger.log("edx.course.enrollment.upgrade.clicked",{location:"sidebar-message"})}),e(".promo-learn-more").click(function(){e(".action-toggle-verification-sock").click(),e(".action-toggle-verification-sock")[0].scrollIntoView({behavior:"smooth",alignToTop:!0})})}}],[{key:"fireSegmentEvent",value:function(e,o){window.analytics&&window.analytics.track(e,o)}}]),o}()}.call(o,n(0))}},["./openedx/features/course_experience/static/course_experience/js/CourseHome.js"]));
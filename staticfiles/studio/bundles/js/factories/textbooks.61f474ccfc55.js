!function(t,e){for(var s in e)t[s]=e[s]}(window,webpackJsonp([10],{"./cms/static/js/collections/chapter.js":function(t,e,s){var i,n;i=[s(2),s("./cms/static/js/models/chapter.js")],void 0!==(n=function(t,e){return t.Collection.extend({model:e,comparator:"order",nextOrder:function(){return this.length?this.last().get("order")+1:1},isEmpty:function(){return 0===this.length||this.every(function(t){return t.isEmpty()})}})}.apply(e,i))&&(t.exports=n)},"./cms/static/js/collections/textbook.js":function(t,e,s){var i,n;i=[s(2),s("./cms/static/js/models/textbook.js")],void 0!==(n=function(t,e){return t.Collection.extend({model:e,url:function(){return CMS.URL.TEXTBOOKS}})}.apply(e,i))&&(t.exports=n)},"./cms/static/js/factories/textbooks.js":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function i(e){var s=new o(e,{parse:!0}),i=new r({collection:s});t(".content-primary").append(i.render().el),t(".nav-actions .new-button").click(function(t){i.addOne(t)}),t(window).on("beforeunload",function(){if(s.find(function(t){return t.isDirty()}))return n("You have unsaved changes. Do you really want to leave this page?")})}e.default=i,s.d(e,"TextbooksFactory",function(){return i});var n=s(3),a=(s.n(n),s("./cms/static/js/models/section.js")),o=(s.n(a),s("./cms/static/js/collections/textbook.js")),r=(s.n(o),s("./cms/static/js/views/list_textbooks.js")),c=(s.n(r),s("./cms/static/js/factories/base.js"));s.n(c)}.call(e,s(0))},"./cms/static/js/models/chapter.js":function(t,e,s){var i,n;i=[s(2),s(3),s("./node_modules/backbone-associations/backbone-associations-min.js")],void 0!==(n=function(t,e){return t.AssociatedModel.extend({defaults:function(){return{name:"",asset_path:"",order:this.collection?this.collection.nextOrder():1}},isEmpty:function(){return!this.get("name")&&!this.get("asset_path")},parse:function(t){return"title"in t&&!("name"in t)&&(t.name=t.title,delete t.title),"url"in t&&!("asset_path"in t)&&(t.asset_path=t.url,delete t.url),t},toJSON:function(){return{title:this.get("name"),url:this.get("asset_path")}},validate:function(t,s){return t.name||t.asset_path?t.name?t.asset_path?void 0:{message:e("asset_path is required"),attributes:{asset_path:!0}}:{message:e("Chapter name is required"),attributes:{name:!0}}:{message:e("Chapter name and asset_path are both required"),attributes:{name:!0,asset_path:!0}}}})}.apply(e,i))&&(t.exports=n)},"./cms/static/js/models/section.js":function(t,e,s){var i,n;i=[s(2),s(3),s("./common/static/common/js/components/views/feedback_notification.js"),s("./cms/static/js/utils/module.js")],void 0!==(n=function(t,e,s,i){return t.Model.extend({defaults:{name:""},validate:function(t,s){if(!t.name)return e("You must specify a name")},urlRoot:i.urlRoot,toJSON:function(){return{metadata:{display_name:this.get("name")}}},initialize:function(){this.listenTo(this,"request",this.showNotification),this.listenTo(this,"sync",this.hideNotification)},showNotification:function(){this.msg||(this.msg=new s.Mini({title:e("Saving")})),this.msg.show()},hideNotification:function(){this.msg&&this.msg.hide()}})}.apply(e,i))&&(t.exports=n)},"./cms/static/js/models/textbook.js":function(t,e,s){(function(i){var n,a;n=[s(2),s(1),s(3),s("./cms/static/js/models/chapter.js"),s("./cms/static/js/collections/chapter.js"),s("./node_modules/backbone-associations/backbone-associations-min.js"),s("./cms/static/cms/js/main.js")],void 0!==(a=function(t,e,s,n,a){return t.AssociatedModel.extend({defaults:function(){return{name:"",chapters:new a([{}]),showChapters:!1,editing:!1}},relations:[{type:t.Many,key:"chapters",relatedModel:n,collectionType:a}],initialize:function(){return this.setOriginalAttributes(),this},setOriginalAttributes:function(){this._originalAttributes=this.parse(this.toJSON())},reset:function(){this.set(this._originalAttributes,{parse:!0})},isDirty:function(){return!e.isEqual(this._originalAttributes,this.parse(this.toJSON()))},isEmpty:function(){return!this.get("name")&&this.get("chapters").isEmpty()},urlRoot:function(){return CMS.URL.TEXTBOOKS},parse:function(t){var s=i.extend(!0,{},t);return"tab_title"in s&&!("name"in s)&&(s.name=s.tab_title,delete s.tab_title),"url"in s&&!("chapters"in s)&&(s.chapters={url:s.url},delete s.url),e.each(s.chapters,function(t,e){t.order=t.order||e+1}),s},toJSON:function(){return{tab_title:this.get("name"),chapters:this.get("chapters").toJSON()}},validate:function(t,i){if(!t.name)return{message:s("Textbook name is required"),attributes:{name:!0}};if(0===t.chapters.length)return{message:s("Please add at least one chapter"),attributes:{chapters:!0}};var n=[];return t.chapters.each(function(t){t.isValid()||n.push(t)}),e.isEmpty(n)?void 0:{message:s("All chapters must have a name and asset"),attributes:{chapters:n}}}})}.apply(e,n))&&(t.exports=a)}).call(e,s(0))},"./cms/static/js/views/edit_chapter.js":function(t,e,s){var i,n;i=[s(1),s(0),s(3),s("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js"),s("./cms/static/js/views/baseview.js"),s("./cms/static/js/models/uploads.js"),s("./cms/static/js/views/uploads.js"),s("./cms/templates/js/edit-chapter.underscore")],void 0!==(n=function(t,e,s,i,n,a,o,r){"use strict";return n.extend({initialize:function(){this.template=i.template(r),this.listenTo(this.model,"change",this.render)},tagName:"li",className:function(){return"field-group chapter chapter"+this.model.get("order")},render:function(){return i.setHtml(this.$el,this.template({name:this.model.get("name"),asset_path:this.model.get("asset_path"),order:this.model.get("order"),error:this.model.validationError})),this},events:{"change .chapter-name":"changeName","change .chapter-asset-path":"changeAssetPath","click .action-close":"removeChapter","click .action-upload":"openUploadDialog",submit:"uploadAsset"},changeName:function(t){return t&&t.preventDefault&&t.preventDefault(),this.model.set({name:this.$(".chapter-name").val()},{silent:!0}),this},changeAssetPath:function(t){return t&&t.preventDefault&&t.preventDefault(),this.model.set({asset_path:this.$(".chapter-asset-path").val()},{silent:!0}),this},removeChapter:function(t){return t&&t.preventDefault&&t.preventDefault(),this.model.collection.remove(this.model),this.remove()},openUploadDialog:function(e){e&&e.preventDefault&&e.preventDefault(),this.model.set({name:this.$("input.chapter-name").val(),asset_path:this.$("input.chapter-asset-path").val()});var i=new a({title:t.template(s("Upload a new PDF to “<%= name %>”"))({name:course.escape("name")}),message:s("Please select a PDF file to upload."),mimeTypes:["application/pdf"]}),n=this;new o({model:i,onSuccess:function(t){var e={};n.model.get("name")||(e.name=t.asset.displayname),e.asset_path=t.asset.portable_url,n.model.set(e)}}).show()}})}.apply(e,i))&&(t.exports=n)},"./cms/static/js/views/edit_textbook.js":function(t,e,s){var i,n;i=[s("./cms/static/js/views/baseview.js"),s(1),s(0),s("./cms/static/js/views/edit_chapter.js"),s("./common/static/common/js/components/views/feedback_notification.js")],void 0!==(n=function(t,e,s,i,n){return t.extend({initialize:function(){this.template=this.loadTemplate("edit-textbook"),this.listenTo(this.model,"invalid",this.render);var t=this.model.get("chapters");this.listenTo(t,"add",this.addOne),this.listenTo(t,"reset",this.addAll),this.listenTo(t,"all",this.render)},tagName:"section",className:"textbook",render:function(){return this.$el.html(this.template({name:this.model.get("name"),error:this.model.validationError})),this.addAll(),this},events:{"change input[name=textbook-name]":"setName",submit:"setAndClose","click .action-cancel":"cancel","click .action-add-chapter":"createChapter"},addOne:function(t){var e=new i({model:t});return this.$("ol.chapters").append(e.render().el),this},addAll:function(){this.model.get("chapters").each(this.addOne,this)},createChapter:function(t){t&&t.preventDefault&&t.preventDefault(),this.setValues(),this.model.get("chapters").add([{}])},setName:function(t){t&&t.preventDefault&&t.preventDefault(),this.model.set("name",this.$("#textbook-name-input").val(),{silent:!0})},setValues:function(){this.setName();var t=this;return e.each(this.$("li"),function(e,i){var n=t.model.get("chapters").at(i);n&&n.set({name:s(".chapter-name",e).val(),asset_path:s(".chapter-asset-path",e).val()})}),this},setAndClose:function(t){if(t&&t.preventDefault&&t.preventDefault(),this.setValues(),this.model.isValid()){var e=new n.Mini({title:gettext("Saving")}).show(),s=this;this.model.save({},{success:function(){s.model.setOriginalAttributes(),s.close()},complete:function(){e.hide()}})}},cancel:function(t){return t&&t.preventDefault&&t.preventDefault(),this.model.reset(),this.close()},close:function(){var t=this.model.collection;return this.remove(),this.model.isNew()&&t.remove(this.model),this.model.set("editing",!1),this}})}.apply(e,i))&&(t.exports=n)},"./cms/static/js/views/list_textbooks.js":function(t,e,s){var i,n;i=[s("./cms/static/js/views/baseview.js"),s(0),s("./cms/static/js/views/edit_textbook.js"),s("./cms/static/js/views/show_textbook.js"),s("./common/static/common/js/components/utils/view_utils.js")],void 0!==(n=function(t,e,s,i,n){return t.extend({initialize:function(){this.emptyTemplate=this.loadTemplate("no-textbooks"),this.listenTo(this.collection,"all",this.render),this.listenTo(this.collection,"destroy",this.handleDestroy)},tagName:"div",className:"textbooks-list",render:function(){var t=this.collection;if(0===t.length)this.$el.html(this.emptyTemplate());else{this.$el.empty();var e=this;t.each(function(t){var n;n=t.get("editing")?new s({model:t}):new i({model:t}),e.$el.append(n.render().el)})}return this},events:{"click .new-button":"addOne"},addOne:function(t){var e,s;t&&t.preventDefault&&t.preventDefault(),this.collection.add([{editing:!0}]),e=this.$el.find("section:last"),n.setScrollOffset(e,0),s=e.find("input:first"),s.focus().select()},handleDestroy:function(t,e,s){e.remove(t)}})}.apply(e,i))&&(t.exports=n)},"./cms/static/js/views/show_textbook.js":function(t,e,s){(function(i){var n,a;n=[s("./cms/static/js/views/baseview.js"),s(1),s(3),s("./common/static/common/js/components/views/feedback_notification.js"),s("./common/static/common/js/components/views/feedback_prompt.js")],void 0!==(a=function(t,e,s,n,a){return t.extend({initialize:function(){this.template=e.template(i("#show-textbook-tpl").text()),this.listenTo(this.model,"change",this.render)},tagName:"section",className:"textbook",events:{"click .edit":"editTextbook","click .delete":"confirmDelete","click .show-chapters":"showChapters","click .hide-chapters":"hideChapters"},render:function(){var t=i.extend({},this.model.attributes);return t.bookindex=this.model.collection.indexOf(this.model),t.course=window.course.attributes,this.$el.html(this.template(t)),this},editTextbook:function(t){t&&t.preventDefault&&t.preventDefault(),this.model.set("editing",!0)},confirmDelete:function(t){t&&t.preventDefault&&t.preventDefault();var i=this.model;new a.Warning({title:e.template(s("Delete “<%= name %>”?"))({name:i.get("name")}),message:s("Deleting a textbook cannot be undone and once deleted any reference to it in your courseware's navigation will also be removed."),actions:{primary:{text:s("Delete"),click:function(t){t.hide();var e=new n.Mini({title:s("Deleting")}).show();i.destroy({complete:function(){e.hide()}})}},secondary:{text:s("Cancel"),click:function(t){t.hide()}}}}).show()},showChapters:function(t){t&&t.preventDefault&&t.preventDefault(),this.model.set("showChapters",!0)},hideChapters:function(t){t&&t.preventDefault&&t.preventDefault(),this.model.set("showChapters",!1)}})}.apply(e,n))&&(t.exports=a)}).call(e,s(0))},"./cms/templates/js/edit-chapter.underscore":function(t,e){t.exports='<div class="input-wrap field text required field-add-chapter-name chapter<%- order %>-name\n    <% if (error && error.attributes && error.attributes.name) { print(\'error\'); } %>">\n  <label for="chapter<%- order %>-name"><%- gettext("Chapter Name") %></label>\n  <input id="chapter<%- order %>-name" name="chapter<%- order %>-name" class="chapter-name short" placeholder="<%- StringUtils.interpolate(gettext("Chapter {order}"), {order: order}) %>" value="<%- name %>" type="text">\n  <span class="tip tip-stacked"><%- gettext("provide the title/name of the chapter that will be used in navigating") %></span>\n</div>\n<div class="input-wrap field text required field-add-chapter-asset chapter<%- order %>-asset\n    <% if (error && error.attributes && error.attributes.asset_path) { print(\'error\'); } %>">\n  <label for="chapter<%- order %>-asset-path"><%- gettext("Chapter Asset") %></label>\n  <input id="chapter<%- order %>-asset-path" name="chapter<%- order %>-asset-path" class="chapter-asset-path" placeholder="<%- StringUtils.interpolate(gettext("path/to/introductionToCookieBaking-CH{order}.pdf"), {order: order}) %>" value="<%- asset_path %>" type="text" dir="ltr">\n  <span class="tip tip-stacked"><%- gettext("upload a PDF file or provide the path to a Studio asset file") %></span>\n<button class="action action-upload"><%- gettext("Upload PDF") %></button>\n</div>\n<a href="" class="action action-close"><span class="icon fa fa-times-circle" aria-hidden="true"></span> <span class="sr"><%- gettext("delete chapter") %></span></a>\n'},"./node_modules/backbone-associations/backbone-associations-min.js":function(t,e,s){var i,n;!function(a,o){i=[s(1),s(2)],void 0!==(n=function(t,e){return o(a,e,t)}.apply(e,i))&&(t.exports=n)}(this,function(t,e,s){var i,n,a,o,r,c,l,h,p,u,d,f={};i=e.Model,n=e.Collection,a=i.prototype,r=n.prototype,o=e.Events,e.Associations={VERSION:"0.6.2"},e.Associations.scopes=[];var m=function(){return p},v=function(t){(!s.isString(t)||1>s.size(t))&&(t="."),p=t,l=RegExp("[\\"+p+"\\[\\]]+","g"),h=RegExp("[^\\"+p+"\\[\\]]+","g")};try{Object.defineProperty(e.Associations,"SEPARATOR",{enumerable:!0,get:m,set:v})}catch(t){}e.Associations.Many=e.Many="Many",e.Associations.One=e.One="One",e.Associations.Self=e.Self="Self",e.Associations.SEPARATOR=".",e.Associations.getSeparator=m,e.Associations.setSeparator=v,e.Associations.EVENTS_BUBBLE=!0,e.Associations.EVENTS_WILDCARD=!0,e.Associations.EVENTS_NC=!1,v(),c=e.AssociatedModel=e.Associations.AssociatedModel=i.extend({relations:void 0,_proxyCalls:void 0,constructor:function(t,e){e&&e.__parents__&&(this.parents=[e.__parents__]),i.apply(this,arguments)},on:function(t,i,n){var a=o.on.apply(this,arguments);if(e.Associations.EVENTS_NC)return a;var r=/\s+/;return s.isString(t)&&t&&!r.test(t)&&i&&(r=_(t))&&(f[r]=void 0===f[r]?1:f[r]+1),a},off:function(t,i,n){if(e.Associations.EVENTS_NC)return o.off.apply(this,arguments);var a=/\s+/,r=this._events,c={},l=r?s.keys(r):[],h=!t&&!i&&!n,p=s.isString(t)&&!a.test(t);if(h||p)for(var a=0,u=l.length;a<u;a++)c[l[a]]=r[l[a]]?r[l[a]].length:0;var d=o.off.apply(this,arguments);if(h||p)for(a=0,u=l.length;a<u;a++)(h=_(l[a]))&&(f[h]=r[l[a]]?f[h]-(c[l[a]]-r[l[a]].length):f[h]-c[l[a]]);return d},get:function(t){var e=this.__attributes__,s=a.get.call(this,t),e=e?x(s)?s:e[t]:s;return x(e)?e:this._getAttr.apply(this,arguments)},set:function(t,e,i){var n;return s.isObject(t)||null==t?(n=t,i=e):(n={},n[t]=e),t=this._set(n,i),this._processPendingEvents(),t},_set:function(t,e){var n,a,o,r,c=this;if(!t)return this;this.__attributes__=t;for(n in t)if(a||(a={}),n.match(l)){var h=g(n);r=s.initial(h),h=h[h.length-1],r=this.get(r),r instanceof i&&(r=a[r.cid]||(a[r.cid]={model:r,data:{}}),r.data[h]=t[n])}else r=a[this.cid]||(a[this.cid]={model:this,data:{}}),r.data[n]=t[n];if(a)for(o in a)r=a[o],this._setAttr.call(r.model,r.data,e)||(c=!1);else c=this._setAttr.call(this,t,e);return delete this.__attributes__,c},_setAttr:function(o,r){var c;if(r||(r={}),r.unset)for(c in o)o[c]=void 0;return this.parents=this.parents||[],this.relations&&s.each(this.relations,function(a){var c,l,h=a.key,p=a.scope||t,u=this._transformRelatedModel(a,o),d=this._transformCollectionType(a,u,o),f=s.isString(a.map)?b(a.map,p):a.map,m=this.attributes[h],v=m&&m.idAttribute,g=!1;if(c=a.options?s.extend({},a.options,r):r,o[h]){if(p=s.result(o,h),p=f?f.call(this,p,d||u):p,x(p))if(a.type===e.Many)m?(m._deferEvents=!0,m[c.reset?"reset":"set"](p instanceof n?p.models:p,c),u=m):(g=!0,p instanceof n?u=p:(u=this._createCollection(d||n,a.collectionOptions||(u?{model:u}:{})),u[c.reset?"reset":"set"](p,c)));else{if(a.type!==e.One)throw Error("type attribute must be specified and have the values Backbone.One or Backbone.Many");a=p instanceof i?p.attributes.hasOwnProperty(v):p.hasOwnProperty(v),d=p instanceof i?p.attributes[v]:p[v],m&&a&&m.attributes[v]===d?(m._deferEvents=!0,m._set(p instanceof i?p.attributes:p,c),u=m):(g=!0,p instanceof i?u=p:(c.__parents__=this,u=new u(p,c),delete c.__parents__))}else u=p;l=o[h]=u,(g||l&&!l._proxyCallback)&&(l._proxyCallback||(l._proxyCallback=function(){return e.Associations.EVENTS_BUBBLE&&this._bubbleEvent.call(this,h,l,arguments)}),l.on("all",l._proxyCallback,this))}o.hasOwnProperty(h)&&this._setupParents(o[h],this.attributes[h])},this),a.set.call(this,o,r)},_bubbleEvent:function(t,s,a){var o,r=a[0].split(":"),c=r[0],l="nested-change"==a[0],h="change"===c,m=a[1],v=-1,g=s._proxyCalls,r=r[1],b=!r||-1==r.indexOf(p);if(!l&&(b&&(d=_(a[0])||t),e.Associations.EVENTS_NC||f[d]))return e.Associations.EVENTS_WILDCARD&&/\[\*\]/g.test(r)?this:(s instanceof n&&(h||r)&&(v=s.indexOf(u||m)),this instanceof i&&(u=this),r=t+(-1!==v&&(h||r)?"["+v+"]":"")+(r?p+r:""),e.Associations.EVENTS_WILDCARD&&(o=r.replace(/\[\d+\]/g,"[*]")),l=[],l.push.apply(l,a),l[0]=c+":"+r,e.Associations.EVENTS_WILDCARD&&r!==o&&(l[0]=l[0]+" "+c+":"+o),g=s._proxyCalls=g||{},this._isEventAvailable.call(this,g,r)?this:(g[r]=!0,h&&(this._previousAttributes[t]=s._previousAttributes,this.changed[t]=s),this.trigger.apply(this,l),e.Associations.EVENTS_NC&&h&&this.get(r)!=a[2]&&(t=["nested-change",r,a[1]],a[2]&&t.push(a[2]),this.trigger.apply(this,t)),g&&r&&delete g[r],u=void 0,this))},_isEventAvailable:function(t,e){return s.find(t,function(t,s){return-1!==e.indexOf(s,e.length-s.length)})},_setupParents:function(t,e){t&&(t.parents=t.parents||[],-1==s.indexOf(t.parents,this)&&t.parents.push(this)),e&&0<e.parents.length&&e!=t&&(e.parents=s.difference(e.parents,[this]),e._proxyCallback&&e.off("all",e._proxyCallback,this))},_createCollection:function(t,e){var e=s.defaults(e,{model:t.model}),i=new t([],s.isFunction(e)?e.call(this):e);return i.parents=[this],i},_processPendingEvents:function(){this._processedEvents||(this._processedEvents=!0,this._deferEvents=!1,s.each(this._pendingEvents,function(t){t.c.trigger.apply(t.c,t.a)}),this._pendingEvents=[],s.each(this.relations,function(t){(t=this.attributes[t.key])&&t._processPendingEvents&&t._processPendingEvents()},this),delete this._processedEvents)},_transformRelatedModel:function(n,a){var o=n.relatedModel,r=n.scope||t;if(o&&!(o.prototype instanceof i)&&(o=s.isFunction(o)?o.call(this,n,a):o),o&&s.isString(o)&&(o=o===e.Self?this.constructor:b(o,r)),n.type===e.One){if(!o)throw Error("specify a relatedModel for Backbone.One type");if(!(o.prototype instanceof e.Model))throw Error("specify an AssociatedModel or Backbone.Model for Backbone.One type")}return o},_transformCollectionType:function(a,o,r){var c=a.collectionType,l=a.scope||t;if(c&&s.isFunction(c)&&c.prototype instanceof i)throw Error("type is of Backbone.Model. Specify derivatives of Backbone.Collection");if(c&&!(c.prototype instanceof n)&&(c=s.isFunction(c)?c.call(this,a,r):c),c&&s.isString(c)&&(c=b(c,l)),c&&!c.prototype instanceof n)throw Error("collectionType must inherit from Backbone.Collection");if(a.type===e.Many&&!o&&!c)throw Error("specify either a relatedModel or collectionType");return c},trigger:function(t){this._deferEvents?(this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,a:arguments})):a.trigger.apply(this,arguments)},toJSON:function(t){var e,i={};return i[this.idAttribute]=this.id,this.visited||(this.visited=!0,i=a.toJSON.apply(this,arguments),t&&t.serialize_keys&&(i=s.pick(i,t.serialize_keys)),this.relations&&s.each(this.relations,function(n){var a=n.key,o=n.remoteKey,r=this.attributes[a],c=!n.isTransient,n=n.serialize||[],l=s.clone(t);delete i[a],c&&(n.length&&(l?l.serialize_keys=n:l={serialize_keys:n}),e=r&&r.toJSON?r.toJSON(l):r,i[o||a]=s.isArray(e)?s.compact(e):e)},this),delete this.visited),i},clone:function(t){return new this.constructor(this.toJSON(t))},cleanup:function(t){t=t||{},s.each(this.relations,function(t){(t=this.attributes[t.key])&&(t._proxyCallback&&t.off("all",t._proxyCallback,this),t.parents=s.difference(t.parents,[this]))},this),!t.listen&&this.off()},destroy:function(t){var t=t?s.clone(t):{},t=s.defaults(t,{remove_references:!0,listen:!0}),e=this;if(t.remove_references&&t.wait){var i=t.success;t.success=function(s){i&&i(e,s,t),e.cleanup(t)}}var n=a.destroy.apply(this,[t]);return t.remove_references&&!t.wait&&e.cleanup(t),n},_getAttr:function(t){var e,i,a=this,o=this.__attributes__,t=g(t);if(!(1>s.size(t))){for(i=0;i<t.length&&(e=t[i],a);i++)a=a instanceof n?isNaN(e)?void 0:a.at(e):o?x(a.attributes[e])?a.attributes[e]:o[e]:a.attributes[e];return a}}});var g=function(t){return""===t?[""]:s.isString(t)?t.match(h):t||[]},_=function(t){return t?(t=t.split(":"),1<t.length?(t=t[t.length-1],t=t.split(p),1<t.length?t[t.length-1].split("[")[0]:t[0].split("[")[0]):""):t},b=function(t,i){var n,a=[i];a.push.apply(a,e.Associations.scopes);for(var o,r=0,c=a.length;r<c&&(!(o=a[r])||!(n=s.reduce(t.split(p),function(t,e){return t[e]},o)));++r);return n},y=function(t,e,i){var n,a;return s.find(t,function(t){if(n=s.find(t.relations,function(s){return t.get(s.key)===e},this))return a=t,!0},this),n&&n.map?n.map.call(a,i,e):i},x=function(t){return!s.isUndefined(t)&&!s.isNull(t)},k={};return s.each(["set","remove","reset"],function(t){k[t]=n.prototype[t],r[t]=function(e,s){return this.model.prototype instanceof c&&this.parents&&(arguments[0]=y(this.parents,this,e)),k[t].apply(this,arguments)}}),k.trigger=r.trigger,r.trigger=function(t){this._deferEvents?(this._pendingEvents=this._pendingEvents||[],this._pendingEvents.push({c:this,a:arguments})):k.trigger.apply(this,arguments)},r._processPendingEvents=c.prototype._processPendingEvents,r.on=c.prototype.on,r.off=c.prototype.off,e})}},["./cms/static/js/factories/textbooks.js"]));
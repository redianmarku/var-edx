RequireJS.define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),RequireJS.define("text!common/templates/components/system-feedback.underscore",[],function(){return'<div class="wrapper wrapper-<%= type %> wrapper-<%= type %>-<%= intent %>\n            <% if(obj.shown) { %>is-shown<% } else { %>is-hiding<% } %>\n            <% if(_.contains([\'help\', \'mini\'], intent)) { %>wrapper-<%= type %>-status<% } %>"\n     id="<%= type %>-<%= intent %>"\n     aria-hidden="<% if(obj.shown) { %>false<% } else { %>true<% } %>"\n     aria-labelledby="<%= type %>-<%= intent %>-title"\n     tabindex="-1"\n     <% if (obj.message) { %>aria-describedby="<%= type %>-<%= intent %>-description" <% } %>\n     <% if (obj.actions) { %>role="dialog"<% } %>\n  >\n  <div class="<%= type %> <%= intent %> <% if(obj.actions) { %>has-actions<% } %>">\n    <% if(obj.icon) { %>\n      <% var iconClass = {"warning": "warning", "confirmation": "check", "error": "warning", "announcement": "bullhorn", "step-required": "exclamation-circle", "help": "question", "mini": "cog"} %>\n      <span class="feedback-symbol fa fa-<%= iconClass[intent] %>" aria-hidden="true"></span>\n    <% } %>\n\n    <div class="copy">\n      <h2 class="title title-3" id="<%= type %>-<%= intent %>-title"><%- title %></h2>\n      <% if(obj.message) { %><p class="message" id="<%= type %>-<%= intent %>-description"><%- message %></p><% } %>\n    </div>\n\n    <% if(obj.actions) { %>\n    <nav class="nav-actions">\n      <ul>\n        <% if(actions.primary) { %>\n        <li class="nav-item">\n          <button class="action-primary <%= actions.primary.class %>"><%- actions.primary.text %></button>\n        </li>\n        <% } %>\n        <% if(actions.secondary) {\n             _.each(actions.secondary, function(secondary) { %>\n        <li class="nav-item">\n          <button class="action-secondary <%= secondary.class %>"><%- secondary.text %></button>\n        </li>\n        <%   });\n           } %>\n      </ul>\n    </nav>\n    <% } %>\n\n    <% if(obj.closeIcon) { %>\n    <a href="#" rel="view" class="action action-close action-<%= type %>-close">\n      <span class="icon fa fa-times-circle" aria-hidden="true"></span>\n      <span class="label">close <%= type %></span>\n    </a>\n    <% } %>\n  </div>\n</div>\n'}),function(e){"use strict";RequireJS.define("common/js/components/views/feedback",["jquery","underscore","underscore.string","backbone","edx-ui-toolkit/js/utils/html-utils","text!../../../../common/templates/components/system-feedback.underscore"],function(e,t,n,i,o,s){var r=["a[href]:not([tabindex='-1'])","area[href]:not([tabindex='-1'])","input:not([disabled]):not([tabindex='-1'])","select:not([disabled]):not([tabindex='-1'])","textarea:not([disabled]):not([tabindex='-1'])","button:not([disabled]):not([tabindex='-1'])","iframe:not([tabindex='-1'])","[tabindex]:not([tabindex='-1'])","[contentEditable=true]:not([tabindex='-1'])"],a=i.View.extend({options:{title:"",message:"",intent:null,type:null,shown:!0,icon:!0,closeIcon:!0,minShown:0,maxShown:1/0,outFocusElement:null},initialize:function(n){if(this.options=t.extend({},this.options,n),!this.options.type)throw"SystemFeedback: type required (given "+JSON.stringify(this.options)+")";if(!this.options.intent)throw"SystemFeedback: intent required (given "+JSON.stringify(this.options)+")";return this.setElement(e("#page-"+this.options.type)),this.options.actions&&this.options.actions.secondary&&!t.isArray(this.options.actions.secondary)&&(this.options.actions.secondary=[this.options.actions.secondary]),this},inFocus:function(e){var t,n=e||".wrapper";return this.options.outFocusElement=this.options.outFocusElement||document.activeElement,this.$(n).first().focus(),t=this.$(r.join()),t.on("keydown",function(e){9===e.which&&e.shiftKey&&e.target===t.first()[0]?(e.preventDefault(),t.last().focus()):9!==e.which||e.shiftKey||e.target!==t.last()[0]||(e.preventDefault(),t.first().focus())}),this},outFocus:function(){return this.$(r.join()).off("keydown"),this.options.outFocusElement&&this.options.outFocusElement.focus(),this},show:function(){return clearTimeout(this.hideTimeout),this.options.shown=!0,this.shownAt=new Date,this.render(),e.isNumeric(this.options.maxShown)&&(this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.maxShown)),this},hide:function(){return this.shownAt&&e.isNumeric(this.options.minShown)&&this.options.minShown>new Date-this.shownAt?(clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(t.bind(this.hide,this),this.options.minShown-(new Date-this.shownAt))):(this.options.shown=!1,delete this.shownAt,this.render()),this},events:{"click .action-close":"hide","click .action-primary":"primaryClick","click .action-secondary":"secondaryClick"},render:function(){var e=a["active_"+this.options.type];return e&&e!==this&&(e.stopListening(),e.undelegateEvents()),o.setHtml(this.$el,o.template(s)(this.options)),a["active_"+this.options.type]=this,this},primaryClick:function(e){var t,n;t=this.options.actions,t&&(n=t.primary,n&&(n.preventDefault!==!1&&e.preventDefault(),n.click&&n.click.call(e.target,this,e)))},secondaryClick:function(e){var n,i,o,s;n=this.options.actions,n&&(i=n.secondary,i&&(s=0,e&&e.target&&(s=t.indexOf(this.$(".action-secondary"),e.target)),o=i[s],o.preventDefault!==!1&&e.preventDefault(),o.click&&o.click.call(e.target,this,e)))}});return a})}.call(this,define||RequireJS.define),function(e){"use strict";RequireJS.define("common/js/components/views/feedback_notification",["jquery","underscore","underscore.string","./feedback"],function(e,t,n,i){var o,s,r,a=i.extend({options:e.extend({},i.prototype.options,{type:"notification",closeIcon:!1})});return o=t.compose(n.capitalize,n.camelize),s=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(s,function(t){var n;n=a.extend({options:e.extend({},a.prototype.options,{intent:t})}),a[o(t)]=n}),r=a.Mini.prototype.options,r.minShown=1250,r.closeIcon=!1,a})}.call(this,define||RequireJS.define),function(e){"use strict";RequireJS.define("common/js/components/views/feedback_prompt",["jquery","underscore","underscore.string","common/js/components/views/feedback"],function(e,t,n,i){var o,s,r=i.extend({options:e.extend({},i.prototype.options,{type:"prompt",closeIcon:!1,icon:!1}),render:function(){return window.$body||(window.$body=e(document.body)),this.options.shown?$body.addClass("prompt-is-shown"):$body.removeClass("prompt-is-shown"),i.prototype.render.apply(this,arguments)},show:function(){return i.prototype.show.apply(this,arguments),this.inFocus()},hide:function(){return i.prototype.hide.apply(this,arguments),this.outFocus()}});return o=t.compose(n.capitalize,n.camelize),s=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(s,function(t){var n;n=r.extend({options:e.extend({},r.prototype.options,{intent:t})}),r[o(t)]=n}),r})}.call(this,define||RequireJS.define),function(e,t){"use strict";RequireJS.define("common/js/components/utils/view_utils",["jquery","underscore","gettext","common/js/components/views/feedback_notification","common/js/components/views/feedback_prompt"],function(e,n,i,o,s){var r,a,c,l,d,u,p,h,f,m,y,w,v,b,g,x,k,S,j,q=65;return r=function(e,t){var n=t||"collapsed";e.closest(".expand-collapse").toggleClass("expand collapse"),e.closest(".is-collapsible, .window").toggleClass(n),e.closest(".is-collapsible").children("article").slideToggle()},a=function(){e(".ui-loading").show()},c=function(){e(".ui-loading").hide()},l=function(e,t,n,o,r){return new s.Warning({title:e,message:t,actions:{primary:{text:n,click:function(e){e.hide(),o()}},secondary:{text:i("Cancel"),click:function(e){return r&&r(),e.hide()}}}}).show()},d=function(e,t){var n;return n=new o.Mini({title:i(e)}),n.show(),t().done(function(){n.hide()})},u=function(t){return function(n){var i=this;p(e(n.currentTarget),function(){return i[t].apply(i,[n])})}},p=function(e,t){return e.addClass("is-disabled").attr("aria-disabled",!0),t().always(function(){e.removeClass("is-disabled").attr("aria-disabled",!1)})},b=function(t){return function(n){n.preventDefault(),e.ajax({url:e(this).data("dismiss-link"),type:"DELETE",success:t})}},m=function(t){e("html, body").animate({scrollTop:t},500)},h=function(t){var n=t.offset().top;return n-e(window).scrollTop()},f=function(e,t){var n=e.offset().top,i=n-t;m(i)},y=function(e){window.location=e},w=function(){window.location.reload()},v=function(e,t){var i,o=e.changedAttributes();if(!o)return!1;for(i=0;i<t.length;i++)if(n.has(o,t[i]))return!0;return!1},g=function(e){return 0===e.length?i("Required field."):""},x=function(e,t){var n=g(e);if(n)return n;if(t){if(/\s/g.test(e))return i("Please do not use any spaces in this field.")}else if(e!==encodeURIComponent(e)||e.match(/[!'()*]/))return i("Please do not use any spaces or special characters in this field.");return""},k=function(t){var i=n.reduce(t,function(t,n){return t+e(n).val().length},0);return q>=i},S=function(t,i,o,s){k(o)?e(t.errorWrapper).removeClass(i.shown).addClass(i.hiding):(e(t.errorWrapper).addClass(i.shown).removeClass(i.hiding),e(t.errorMessage).html("<p>"+n.template(s)({limit:q})+"</p>"),e(t.save).addClass(i.disabled))},j=function(n){var i=e.Deferred();return t([n],function(){i.resolve()},function(){i.reject()}),i.promise()},{toggleExpandCollapse:r,showLoadingIndicator:a,hideLoadingIndicator:c,confirmThenRunOperation:l,runOperationShowingMessage:d,withDisabledElement:u,disableElementWhileRunning:p,deleteNotificationHandler:b,setScrollTop:m,getScrollOffset:h,setScrollOffset:f,redirect:y,reload:w,hasChangedAttributes:v,validateRequiredField:g,validateURLItemEncoding:x,validateTotalKeyLength:k,checkTotalKeyLengthViolations:S,loadJavaScript:j}})}.call(this,define||RequireJS.define,require||RequireJS.require),function(e){"use strict";RequireJS.define("lms/js/preview/preview_factory",["jquery","common/js/components/utils/view_utils"],function(e,t){return function(n){function i(i){var o={role:"staff"===i.val()?"staff":"student",user_partition_id:i.data("partition-id"),group_id:i.data("group-id"),user_name:"specific student"===i.val()?s.val():null};e.ajax({url:"/courses/"+n.courseId+"/masquerade",type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(o),success:function(e){e.success?t.reload():alert(e.error)},error:function(){alert("Error: cannot connect to server")}})}var o=e(".action-preview-select"),s=e(".action-preview-username"),r=e(".action-preview-username-container");n.disableStudentAccess&&(o.attr("disabled",!0),o.attr("title",gettext("Course is not yet visible to students."))),n.specificStudentSelected&&(r.css("display","inline-block"),s.val(n.masqueradeUsername)),o.change(function(){var e;return o.attr("disabled")?alert(gettext("You cannot view the course as a student or beta tester before the course release date.")):(e=o.find("option:selected"),void("specific student"===e.val()?r.css("display","inline-block"):(r.hide(),i(e))))}),s.keypress(function(e){return 13===e.keyCode?(s.blur(),!1):!0}),s.change(function(){i(o.find("option:selected"))})}})}.call(this,define||RequireJS.define);
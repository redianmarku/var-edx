!function(t,e){for(var o in e)t[o]=e[o]}(window,webpackJsonp([20],{"./cms/static/js/factories/edit_tabs.js":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){function n(e,o){r.done(function(){var n=new i({id:e,explicit_url:o});new s({el:t(".tab-list"),model:n,mast:t(".wrapper-mast")})})}e.default=n,o.d(e,"EditTabsFactory",function(){return n});var i=o("./cms/static/js/models/explicit_url.js"),s=(o.n(i),o("./cms/static/js/views/tabs.js")),r=(o.n(s),o("./cms/djangoapps/pipeline_js/js/xmodule.js")),a=(o.n(r),o("./cms/static/js/factories/base.js")),c=(o.n(a),o("./cms/static/cms/js/main.js")),l=(o.n(c),o("./cms/static/cms/js/xblock/cms.runtime.v1.js"));o.n(l)}.call(e,o(0))},"./cms/static/js/models/explicit_url.js":function(t,e,o){var n,i;n=[o(2)],void 0!==(i=function(t){return t.Model.extend({defaults:{explicit_url:""},url:function(){return this.get("explicit_url")}})}.apply(e,n))&&(t.exports=i)},"./cms/static/js/models/module_info.js":function(t,e,o){var n,i;n=[o(2),o("./cms/static/js/utils/module.js")],void 0!==(i=function(t,e){return t.Model.extend({urlRoot:e.urlRoot,defaults:{id:null,data:null,metadata:null,children:null}})}.apply(e,n))&&(t.exports=i)},"./cms/static/js/views/module_edit.js":function(t,e,o){var n,i;(function(){"use strict";var s={}.hasOwnProperty,r=function(t,e){function o(){this.constructor=t}var n;for(n in e)s.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};n=[o(0),o(1),o(3),o("./common/static/common/js/xblock/runtime.v1.js"),o("./cms/static/js/views/xblock.js"),o("./cms/static/js/views/modals/edit_xblock.js")],void 0!==(i=function(t,e,o,n,i,s){return function(o){function i(){return i.__super__.constructor.apply(this,arguments)}return r(i,o),i.prototype.tagName="li",i.prototype.className="component",i.prototype.editorMode="editor-mode",i.prototype.events={"click .edit-button":"clickEditButton","click .delete-button":"onDelete"},i.prototype.initialize=function(){return this.onDelete=this.options.onDelete,this.render()},i.prototype.loadDisplay=function(){var t;if(t=this.$el.find(".xblock-student_view"),t.length>0)return n.initializeBlock(t)},i.prototype.createItem=function(o,n,i){var s=this;return e.isNull(i)&&(i=function(){}),n.parent_locator=o,t.postJSON(this.model.urlRoot+"/",n,function(t){return s.model.set({id:t.locator}),s.$el.data("locator",t.locator),s.$el.data("courseKey",t.courseKey),s.render()}).success(i)},i.prototype.loadView=function(e,o,n){var i=this;if(this.model.id)return t.ajax({url:decodeURIComponent(this.model.url())+"/"+e,type:"GET",cache:!1,headers:{Accept:"application/json"},success:function(t){return i.renderXBlockFragment(t,o).done(n)}})},i.prototype.render=function(){var t=this;return this.loadView("student_view",this.$el,function(){return t.loadDisplay(),t.delegateEvents()})},i.prototype.clickEditButton=function(t){var o;return t.preventDefault(),o=new s,o.edit(this.$el,this.model,{refresh:e.bind(this.render,this)})},i}(i)}.apply(e,n))&&(t.exports=i)}).call(this)},"./cms/static/js/views/tabs.js":function(t,e,o){var n,i;(function(s,r){"use strict";var a={}.hasOwnProperty,c=function(t,e){function o(){this.constructor=t}var n;for(n in e)a.call(e,n)&&(t[n]=e[n]);return o.prototype=e.prototype,t.prototype=new o,t.__super__=e.prototype,t};n=[o(1),o(0),o("./common/static/js/vendor/jquery-ui.min.js"),o(2),o("./common/static/common/js/components/views/feedback_prompt.js"),o("./common/static/common/js/components/views/feedback_notification.js"),o("./cms/static/js/views/module_edit.js"),o("./cms/static/js/models/module_info.js"),o("./cms/static/js/utils/module.js")],void 0!==(i=function(t,e,o,n,i,a,l,u,d){return function(o){function n(){var t=this;return this.deleteTab=function(){return n.prototype.deleteTab.apply(t,arguments)},this.addNewTab=function(){return n.prototype.addNewTab.apply(t,arguments)},this.tabMoved=function(){return n.prototype.tabMoved.apply(t,arguments)},this.toggleVisibilityOfTab=function(){return n.prototype.toggleVisibilityOfTab.apply(t,arguments)},this.initialize=function(){return n.prototype.initialize.apply(t,arguments)},n.__super__.constructor.apply(this,arguments)}return c(n,o),n.prototype.initialize=function(o){var n=this;return this.$(".component").each(function(t,o){var i;return i=new u({id:e(o).data("locator")}),new l({el:o,onDelete:n.deleteTab,model:i})}),this.options=t.extend({},o),this.options.mast.find(".new-tab").on("click",this.addNewTab),e(".add-pages .new-tab").on("click",this.addNewTab),e(".toggle-checkbox").on("click",this.toggleVisibilityOfTab),this.$(".course-nav-list").sortable({handle:".drag-handle",update:this.tabMoved,helper:"clone",opacity:"0.5",placeholder:"component-placeholder",forcePlaceholderSize:!0,axis:"y",items:"> .is-movable"})},n.prototype.toggleVisibilityOfTab=function(t){var o,n,i;return o=t.target,i=e(o).parents(".course-tab")[0],n=new a.Mini({title:gettext("Saving")}),n.show(),e.ajax({type:"POST",url:this.model.url(),data:JSON.stringify({tab_id_locator:{tab_id:e(i).data("tab-id"),tab_locator:e(i).data("locator")},is_hidden:e(o).is(":checked")}),contentType:"application/json"}).success(function(){return n.hide()})},n.prototype.tabMoved=function(){var t,o;return o=[],this.$(".course-tab").each(function(t,n){return o.push({tab_id:e(n).data("tab-id"),tab_locator:e(n).data("locator")})}),s.track("Reordered Pages",{course:r}),t=new a.Mini({title:gettext("Saving")}),t.show(),e.ajax({type:"POST",url:this.model.url(),data:JSON.stringify({tabs:o}),contentType:"application/json"}).success(function(){return t.hide()})},n.prototype.addNewTab=function(t){var o;return t.preventDefault(),o=new l({onDelete:this.deleteTab,model:new u}),e(".new-component-item").before(o.$el),o.$el.addClass("course-tab is-movable"),o.$el.addClass("new"),setTimeout(function(){return o.$el.removeClass("new")},1e3),e("html, body").animate({scrollTop:e(".new-component-item").offset().top},500),o.createItem(this.model.get("id"),{category:"static_tab"}),s.track("Added Page",{course:r})},n.prototype.deleteTab=function(t){var o;return o=new i.Warning({title:gettext("Delete Page Confirmation"),message:gettext("Are you sure you want to delete this page? This action cannot be undone."),actions:{primary:{text:gettext("OK"),click:function(o){var n,i;return o.hide(),n=e(t.currentTarget).parents(".component"),s.track("Deleted Page",{course:r,id:n.data("locator")}),i=new a.Mini({title:gettext("Deleting")}),i.show(),e.ajax({type:"DELETE",url:d.getUpdateUrl(n.data("locator"))}).success(function(){return n.remove(),i.hide()})}},secondary:[{text:gettext("Cancel"),click:function(t){return t.hide()}}]}}),o.show()},n}(n.View)}.apply(e,n))&&(t.exports=i)}).call(this,analytics,course_location_analytics)}},["./cms/static/js/factories/edit_tabs.js"]));
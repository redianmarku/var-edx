!function(e,t){for(var i in t)e[i]=t[i]}(window,webpackJsonp([5],{"./cms/static/js/collections/component_template.js":function(e,t,i){var n,s;n=[i(2),i("./cms/static/js/models/component_template.js")],void 0!==(s=function(e,t){return e.Collection.extend({model:t})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/factories/container.js":function(e,t,i){"use strict";function n(e,t,i,n){var d={el:s("#content"),model:new a(t,{parse:!0}),action:i,templates:new c(e,{parse:!0})};r.done(function(){new l(o.extend(d,n)).render()})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,i.d(t,"ContainerFactory",function(){return n});var s=i(0),o=(i.n(s),i(1)),a=(i.n(o),i("./cms/static/js/models/xblock_container_info.js")),l=(i.n(a),i("./cms/static/js/views/pages/container.js")),c=(i.n(l),i("./cms/static/js/collections/component_template.js")),r=(i.n(c),i("./cms/djangoapps/pipeline_js/js/xmodule.js")),d=(i.n(r),i("./cms/static/js/factories/base.js")),u=(i.n(d),i("./cms/static/cms/js/main.js")),h=(i.n(u),i("./cms/static/cms/js/xblock/cms.runtime.v1.js"));i.n(h)},"./cms/static/js/models/component_template.js":function(e,t,i){var n,s;n=[i(2)],void 0!==(s=function(e){return e.Model.extend({defaults:{type:"",templates:[],support_legend:{}},parse:function(e){var t=function(t){return!t.boilerplate_name&&t.category===e.type};this.type=e.type,this.templates=e.templates,this.display_name=e.display_name,this.support_legend=e.support_legend,this.templates.sort(function(e,i){return t(e)?-1:t(i)?1:e.hinted&&!i.hinted?1:!e.hinted&&i.hinted?-1:e.display_name>i.display_name?1:e.display_name<i.display_name?-1:0})}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/models/custom_sync_xblock_info.js":function(e,t,i){var n,s;n=[i("./cms/static/js/models/xblock_info.js")],void 0!==(s=function(e){return e.extend({sync:function(t,i,n){return n.url=(this.urlRoots[t]||this.urlRoot)+"/"+this.get("id"),e.prototype.sync.call(this,t,i,n)}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/models/xblock_container_info.js":function(e,t,i){var n,s;n=[i("./cms/static/js/models/custom_sync_xblock_info.js")],void 0!==(s=function(e){return e.extend({urlRoots:{read:"/xblock/container"}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/components/add_xblock.js":function(e,t,i){var n,s;n=[i(0),i(1),i(3),i("./cms/static/js/views/baseview.js"),i("./common/static/common/js/components/utils/view_utils.js"),i("./cms/static/js/views/components/add_xblock_button.js"),i("./cms/static/js/views/components/add_xblock_menu.js")],void 0!==(s=function(e,t,i,n,s,o,a){return n.extend({events:{"click .new-component .new-component-type .multiple-templates":"showComponentTemplates","click .new-component .new-component-type .single-template":"createNewComponent","click .new-component .cancel-button":"closeNewComponent","click .new-component-templates .new-component-template .button-component":"createNewComponent","click .new-component-templates .cancel-button":"closeNewComponent"},initialize:function(e){n.prototype.initialize.call(this,e),this.template=this.loadTemplate("add-xblock-component")},render:function(){if(!this.$el.html()){var e=this;this.$el.html(this.template({})),this.collection.each(function(t){var i,n;i=new o({model:t}),e.$el.find(".new-component-type").append(i.render().el),n=new a({model:t}),e.$el.append(n.render().el)})}},showComponentTemplates:function(t){var i;t.preventDefault(),t.stopPropagation(),i=e(t.currentTarget).data("type"),this.$(".new-component").slideUp(250),this.$(".new-component-"+i).slideDown(250),this.$(".new-component-"+i+" div").focus()},closeNewComponent:function(t){t.preventDefault(),t.stopPropagation(),type=e(t.currentTarget).data("type"),this.$(".new-component").slideDown(250),this.$(".new-component-templates").slideUp(250),this.$("ul.new-component-type li button[data-type="+type+"]").focus()},createNewComponent:function(n){var o=this,a=e(n.currentTarget),l=a.data(),c=s.getScrollOffset(this.$el);n.preventDefault(),this.closeNewComponent(n),s.runOperationShowingMessage(i("Adding"),t.bind(this.options.createComponent,this,l,a)).always(function(){s.setScrollOffset(o.$el,c)})}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/components/add_xblock_button.js":function(e,t,i){var n,s;n=[i("./cms/static/js/views/baseview.js")],void 0!==(s=function(e){return e.extend({tagName:"li",initialize:function(){e.prototype.initialize.call(this),this.template=this.loadTemplate("add-xblock-component-button"),this.$el.html(this.template({type:this.model.type,templates:this.model.templates,display_name:this.model.display_name}))}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/components/add_xblock_menu.js":function(e,t,i){var n,s;n=[i(0),i("./cms/static/js/views/baseview.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js")],void 0!==(s=function(e,t,i){return t.extend({className:function(){return"new-component-templates new-component-"+this.model.type},initialize:function(){t.prototype.initialize.call(this);var e="problem"===this.model.type?"add-xblock-component-menu-problem":"add-xblock-component-menu",n=this.loadTemplate("add-xblock-component-support-level"),s=this.loadTemplate("add-xblock-component-support-legend");this.template=this.loadTemplate(e),i.setHtml(this.$el,i.HTML(this.template({type:this.model.type,templates:this.model.templates,support_legend:this.model.support_legend,support_indicator_template:n,support_legend_template:s,HtmlUtils:i}))),this.$(".tab-group").tabs()}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/container.js":function(e,t,i){var n,s;n=[i(0),i(1),i("./cms/static/js/views/xblock.js"),i("./cms/static/js/utils/module.js"),i(3),i("./common/static/common/js/components/views/feedback_notification.js"),i("./common/static/js/vendor/jquery-ui.min.js")],void 0!==(s=function(e,t,i,n,s,o){"use strict";return i.extend({requestToken:"",new_child_view:"reorderable_container_child_preview",xblockReady:function(){var n,a,l,c,r=this;i.prototype.xblockReady.call(this),this.requestToken=this.$("div.xblock").first().data("request-token"),n=this.makeRequestSpecificSelector(".reorderable-container"),a=this.$(n),a.sortable({handle:".drag-handle",start:function(){a.sortable("refreshPositions")},stop:function(){var e,i,n;t.isUndefined(c)||(e=new o.Mini({title:s("Saving")}),e.show(),i=function(){e.hide()},l?(n=c,r.updateChildren(l,function(){r.updateChildren(n,i)})):r.updateChildren(c,i),c=void 0,l=void 0)},update:function(t,i){var n=e(t.target).closest(".studio-xblock-wrapper");i.sender?l=n:c=n},helper:"original",opacity:"0.5",placeholder:"component-placeholder",forcePlaceholderSize:!0,axis:"y",items:"> .is-draggable",connectWith:n,tolerance:"pointer"})},updateChildren:function(i,s){var o,a,l=this.model;o=i.find(".studio-xblock-wrapper").filter(function(){return e(this).parent().closest(".studio-xblock-wrapper").data("locator")===i.data("locator")}),a=t.map(o,function(t){return e(t).data("locator")}),e.ajax({url:n.getUpdateUrl(i.data("locator")),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify({children:a}),success:function(){s&&s(),l.fetch()}})},acknowledgeXBlockDeletion:function(e){this.notifyRuntime("deleted-child",e)},refresh:function(){var e=this.makeRequestSpecificSelector(".reorderable-container.ui-sortable");this.$(e).sortable("refresh")},makeRequestSpecificSelector:function(e){return'div.xblock[data-request-token="'+this.requestToken+'"] > '+e}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/modals/move_xblock_modal.js":function(e,t,i){var n,s;n=[i(0),i(2),i(1),i(3),i("./cms/static/js/views/baseview.js"),i("./cms/static/js/views/utils/xblock_utils.js"),i("./cms/static/js/views/utils/move_xblock_utils.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/string-utils.js"),i("./common/static/common/js/components/views/feedback.js"),i("./cms/static/js/models/xblock_info.js"),i("./cms/static/js/views/modals/base_modal.js"),i("./cms/static/js/views/move_xblock_list.js"),i("./cms/static/js/views/move_xblock_breadcrumb.js"),i("./cms/templates/js/move-xblock-modal.underscore")],void 0!==(s=function(e,t,i,n,s,o,a,l,c,r,d,u,h,p,m){"use strict";return u.extend({events:i.extend({},u.prototype.events,{"click .action-move:not(.is-disabled)":"moveXBlock"}),options:e.extend({},u.prototype.options,{modalName:"move-xblock",modalSize:"lg",showEditorModeButtons:!1,addPrimaryActionButton:!0,primaryActionButtonType:"move",viewSpecificClasses:"move-modal",primaryActionButtonTitle:n("Move"),modalSRTitle:n("Choose a location to move your component to")}),initialize:function(){var i=this;u.prototype.initialize.call(this),this.sourceXBlockInfo=this.options.sourceXBlockInfo,this.sourceParentXBlockInfo=this.options.sourceParentXBlockInfo,this.targetParentXBlockInfo=null,this.XBlockURLRoot=this.options.XBlockURLRoot,this.XBlockAncestorInfoURL=c.interpolate("{urlRoot}/{usageId}?fields=ancestorInfo",{urlRoot:this.XBlockURLRoot,usageId:this.sourceXBlockInfo.get("id")}),this.outlineURL=this.options.outlineURL,this.options.title=this.getTitle(),this.fetchCourseOutline().done(function(t,n){e(".ui-loading").addClass("is-hidden"),e(".breadcrumb-container").removeClass("is-hidden"),i.renderViews(t,n)}),this.listenTo(t,"move:breadcrumbRendered",this.focusModal),this.listenTo(t,"move:enableMoveOperation",this.enableMoveOperation),this.listenTo(t,"move:hideMoveModal",this.hide)},getTitle:function(){return c.interpolate(n("Move: {displayName}"),{displayName:this.sourceXBlockInfo.get("display_name")})},getContentHtml:function(){return i.template(m)({})},show:function(){u.prototype.show.apply(this,[!1]),this.updateMoveState(!1),a.hideMovedNotification()},hide:function(){this.moveXBlockListView&&this.moveXBlockListView.remove(),this.moveXBlockBreadcrumbView&&this.moveXBlockBreadcrumbView.remove(),u.prototype.hide.apply(this),r.prototype.outFocus.apply(this)},resize:function(){},focusModal:function(){r.prototype.inFocus.apply(this,[this.options.modalWindowClass]),e(this.options.modalWindowClass).focus()},fetchCourseOutline:function(){return e.when(this.fetchData(this.outlineURL),this.fetchData(this.XBlockAncestorInfoURL))},fetchData:function(t){var i=e.Deferred();return e.ajax({url:t,contentType:"application/json",dataType:"json",type:"GET"}).done(function(e){i.resolve(e)}).fail(function(){i.reject()}),i.promise()},renderViews:function(e,t){this.moveXBlockBreadcrumbView=new p({}),this.moveXBlockListView=new h({model:new d(e,{parse:!0}),sourceXBlockInfo:this.sourceXBlockInfo,ancestorInfo:t})},updateMoveState:function(e){var t=this.$el.find(".action-move");e?t.removeClass("is-disabled"):t.addClass("is-disabled")},isValidCategory:function(e){var t=["course","chapter","sequential","vertical"],n=this.sourceParentXBlockInfo.get("category"),s=e.get("category"),o=this.sourceParentXBlockInfo.get("has_children"),a=e.get("has_children");return o&&!i.contains(t,n)&&(n="vertical"),a&&!i.contains(t,s)&&"split_test"!==s&&(s="vertical"),s===n},enableMoveOperation:function(e){var t=!1;this.targetParentXBlockInfo=e,this.isValidCategory(e)&&this.sourceParentXBlockInfo.id!==e.id&&this.sourceXBlockInfo.id!==e.id&&(t=!0),this.updateMoveState(t)},moveXBlock:function(){a.moveXBlock({sourceXBlockElement:e("li.studio-xblock-wrapper[data-locator='"+this.sourceXBlockInfo.id+"']"),sourceDisplayName:this.sourceXBlockInfo.get("display_name"),sourceLocator:this.sourceXBlockInfo.id,sourceParentLocator:this.sourceParentXBlockInfo.id,targetParentLocator:this.targetParentXBlockInfo.id})}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/move_xblock_breadcrumb.js":function(e,t,i){var n,s;n=[i(0),i(2),i(1),i(3),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/string-utils.js"),i("./cms/templates/js/move-xblock-breadcrumb.underscore")],void 0!==(s=function(e,t,i,n,s,o,a){"use strict";return t.View.extend({el:".breadcrumb-container",events:{"click .parent-nav-button":"handleBreadcrumbButtonPress"},initialize:function(){this.template=s.template(a),this.listenTo(t,"move:childrenRendered",this.render)},render:function(e){return s.setHtml(this.$el,this.template(e)),t.trigger("move:breadcrumbRendered"),this},handleBreadcrumbButtonPress:function(i){t.trigger("move:breadcrumbButtonPressed",e(i.target).data("parentIndex"))}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/move_xblock_list.js":function(e,t,i){var n,s;n=[i(0),i(2),i(1),i(3),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/string-utils.js"),i("./cms/static/js/views/utils/xblock_utils.js"),i("./cms/templates/js/move-xblock-list.underscore")],void 0!==(s=function(e,t,i,n,s,o,a,l){"use strict";return t.View.extend({el:".xblock-list-container",parentInfo:{},childrenInfo:{},visitedAncestors:null,categoryRelationMap:{course:"section",section:"subsection",subsection:"unit",unit:"component"},categoriesText:{section:n("Sections"),subsection:n("Subsections"),unit:n("Units"),component:n("Components"),group:n("Groups")},events:{"click .button-forward":"renderChildren"},initialize:function(e){this.visitedAncestors=[],this.template=s.template(l),this.sourceXBlockInfo=e.sourceXBlockInfo,this.ancestorInfo=e.ancestorInfo,this.listenTo(t,"move:breadcrumbButtonPressed",this.handleBreadcrumbButtonPress),this.renderXBlockInfo()},render:function(){return s.setHtml(this.$el,this.template({sourceXBlockId:this.sourceXBlockInfo.id,xblocks:this.childrenInfo.children,noChildText:this.getNoChildText(),categoryText:this.getCategoryText(),parentDisplayname:this.parentInfo.parent.get("display_name"),XBlocksCategory:this.childrenInfo.category,currentLocationIndex:this.getCurrentLocationIndex()})),t.trigger("move:childrenRendered",this.breadcrumbInfo()),t.trigger("move:enableMoveOperation",this.parentInfo.parent),this},renderChildren:function(t){this.renderXBlockInfo("forward",e(t.target).closest(".xblock-item").data("itemIndex"))},handleBreadcrumbButtonPress:function(e){this.renderXBlockInfo("backward",e)},renderXBlockInfo:function(e,t){void 0===e?this.parentInfo.parent=this.model:"forward"===e?this.parentInfo.parent=this.childrenInfo.children[t]:"backward"===e&&(this.parentInfo.parent=this.visitedAncestors[t],this.visitedAncestors.splice(t)),this.visitedAncestors.push(this.parentInfo.parent),this.parentInfo.parent.get("child_info")?this.childrenInfo.children=this.parentInfo.parent.get("child_info").children:this.childrenInfo.children=[],this.setDisplayedXBlocksCategories(),this.render()},setDisplayedXBlocksCategories:function(){var e="component";this.parentInfo.category=a.getXBlockType(this.parentInfo.parent.get("category")),i.contains(i.keys(this.categoryRelationMap),this.parentInfo.category)||("split_test"===this.parentInfo.category&&(e="group"),this.categoryRelationMap[this.parentInfo.category]=e),this.childrenInfo.category=this.categoryRelationMap[this.parentInfo.category]},getCurrentLocationIndex:function(){var e,t=this;return i.each(t.childrenInfo.children,function(n,s){n.get("id")===t.sourceXBlockInfo.id?e=s:i.each(t.ancestorInfo.ancestors,function(t){t.display_name===n.get("display_name")&&t.id===n.get("id")&&(e=s)})}),e},getCategoryText:function(){return this.categoriesText[this.childrenInfo.category]},getNoChildText:function(){return o.interpolate(n("This {parentCategory} has no {childCategory}"),{parentCategory:this.parentInfo.category,childCategory:this.categoriesText[this.childrenInfo.category].toLowerCase()})},breadcrumbInfo:function(){return{breadcrumbs:i.map(this.visitedAncestors,function(e){return"course"===e.get("category")?n("Course Outline"):e.get("display_name")})}}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/pages/base_page.js":function(e,t,i){var n,s;n=[i(0),i("./cms/static/js/views/baseview.js")],void 0!==(s=function(e,t){return t.extend({initialize:function(){t.prototype.initialize.call(this)},hasContent:function(){return!0},renderPage:function(){return e.Deferred().resolve().promise()},render:function(){var e=this;return this.$(".ui-loading").removeClass("is-hidden"),this.renderPage().done(function(){e.hasContent()||e.$(".no-content").removeClass("is-hidden")}).always(function(){e.$(".ui-loading").addClass("is-hidden")}),this}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/pages/container.js":function(e,t,i){var n,s;n=[i(0),i(1),i(2),i(3),i("./cms/static/js/views/pages/base_page.js"),i("./common/static/common/js/components/utils/view_utils.js"),i("./cms/static/js/views/container.js"),i("./cms/static/js/views/xblock.js"),i("./cms/static/js/views/components/add_xblock.js"),i("./cms/static/js/views/modals/edit_xblock.js"),i("./cms/static/js/views/modals/move_xblock_modal.js"),i("./cms/static/js/models/xblock_info.js"),i("./cms/static/js/views/xblock_string_field_editor.js"),i("./cms/static/js/views/xblock_access_editor.js"),i("./cms/static/js/views/pages/container_subviews.js"),i("./cms/static/js/views/unit_outline.js"),i("./cms/static/js/views/utils/xblock_utils.js")],void 0!==(s=function(e,t,i,n,s,o,a,l,c,r,d,u,h,p,m,f,v){"use strict";return s.extend({events:{"click .edit-button":"editXBlock","click .access-button":"editVisibilitySettings","click .duplicate-button":"duplicateXBlock","click .move-button":"showMoveXBlockModal","click .delete-button":"deleteXBlock","click .new-component-button":"scrollToNewComponentButtons"},options:{collapsedClass:"is-collapsed",canEdit:!0},view:"container_preview",defaultViewClass:a,components_on_init:!0,initialize:function(e){s.prototype.initialize.call(this,e),this.viewClass=e.viewClass||this.defaultViewClass,this.isLibraryPage="library"===this.model.attributes.category,this.nameEditor=new h({el:this.$(".wrapper-xblock-field"),model:this.model}),this.nameEditor.render(),this.isLibraryPage||(this.accessEditor=new p({el:this.$(".wrapper-xblock-field")}),this.accessEditor.render()),"new"===this.options.action&&this.nameEditor.$(".xblock-field-value-edit").click(),this.xblockView=this.getXBlockView(),this.messageView=new m.MessageView({el:this.$(".container-message"),model:this.model}),this.messageView.render(),this.isLibraryPage||(this.containerAccessView=new m.ContainerAccess({el:this.$(".container-access"),model:this.model}),this.containerAccessView.render(),this.xblockPublisher=new m.Publisher({el:this.$("#publish-unit"),model:this.model,renderPage:this.render}),this.xblockPublisher.render(),this.publishHistory=new m.PublishHistory({el:this.$("#publish-history"),model:this.model}),this.publishHistory.render(),this.viewLiveActions=new m.ViewLiveButtonController({el:this.$(".nav-actions"),model:this.model}),this.viewLiveActions.render(),this.unitOutlineView=new f({el:this.$(".wrapper-unit-overview"),model:this.model}),this.unitOutlineView.render()),this.listenTo(i,"move:onXBlockMoved",this.onXBlockMoved)},getViewParameters:function(){return{el:this.$(".wrapper-xblock"),model:this.model,view:this.view}},getXBlockView:function(){return new this.viewClass(this.getViewParameters())},render:function(e){var t=this,i=this.xblockView,n=this.$(".ui-loading"),s=this.$(".unit-location");n.removeClass("is-hidden"),i.$el.addClass("is-hidden"),i.render({done:function(){i.$el.removeClass("is-hidden"),n.addClass("is-hidden"),i.notifyRuntime("page-shown",t),t.components_on_init&&t.renderAddXBlockComponents(),t.onXBlockRefresh(i),s.removeClass("is-hidden"),t.delegateEvents()},block_added:e&&e.block_added})},findXBlockElement:function(t){return e(t).closest(".studio-xblock-wrapper")},getURLRoot:function(){return this.xblockView.model.urlRoot},onXBlockRefresh:function(e,t,i){this.xblockView.refresh(e,t,i),this.model.fetch()},renderAddXBlockComponents:function(){var e=this;e.options.canEdit?this.$(".add-xblock-component").each(function(i,n){new c({el:n,createComponent:t.bind(e.createComponent,e),collection:e.options.templates}).render()}):this.$(".add-xblock-component").remove()},editXBlock:function(e,t){var i=this.findXBlockElement(e.target),n=this,s=new r(t);e.preventDefault(),s.edit(i,this.model,{readOnlyView:!this.options.canEdit,refresh:function(){n.refreshXBlock(i,!1)}})},editVisibilitySettings:function(e){this.editXBlock(e,{view:"visibility_view",titleFormat:n("Editing access for: %(title)s"),viewSpecificClasses:"",modalSize:"med"})},duplicateXBlock:function(e){e.preventDefault(),this.duplicateComponent(this.findXBlockElement(e.target))},showMoveXBlockModal:function(e){var t=this.findXBlockElement(e.target),i=t.parents(".studio-xblock-wrapper"),n=new d({sourceXBlockInfo:v.findXBlockInfo(t,this.model),sourceParentXBlockInfo:v.findXBlockInfo(i,this.model),XBlockURLRoot:this.getURLRoot(),outlineURL:this.options.outlineURL});e.preventDefault(),n.show()},deleteXBlock:function(e){e.preventDefault(),this.deleteComponent(this.findXBlockElement(e.target))},createPlaceholderElement:function(){return e("<div/>",{class:"studio-xblock-wrapper"})},createComponent:function(i,n){var s,a=this.findXBlockElement(n),l=a.data("locator"),c=n.closest(".add-xblock-component"),r=c.prev(),d=o.getScrollOffset(c),u=e(this.createPlaceholderElement()),h=t.extend(i,{parent_locator:l});return s=u.appendTo(r),e.postJSON(this.getURLRoot()+"/",h,t.bind(this.onNewXBlock,this,s,d,!1)).fail(function(){s.remove()})},duplicateComponent:function(t){var i,n=this,s=n.findXBlockElement(t.parent()),a=o.getScrollOffset(t),l=e(n.createPlaceholderElement());i=l.insertAfter(t),v.duplicateXBlock(t,s).done(function(e){n.onNewXBlock(i,a,!0,e)}).fail(function(){i.remove()})},deleteComponent:function(e){var t=this,i=new u({id:e.data("locator")});v.deleteXBlock(i).done(function(){t.onDelete(e)})},onDelete:function(e){var t=this.xblockView,i=this.findXBlockElement(e.parent());e.remove(),t.acknowledgeXBlockDeletion(i.data("locator")),this.model.fetch()},onXBlockMoved:function(){this.model.fetch()},onNewXBlock:function(e,t,i,n){return o.setScrollOffset(e,t),e.data("locator",n.locator),this.refreshXBlock(e,!0,i)},refreshXBlock:function(e,t,i){var n=this.findXBlockElement(e),s=n.parent(),o=this.xblockView.model.id;0===n.length||n.data("locator")===o?this.render({refresh:!0,block_added:t}):s.hasClass("reorderable-container")?this.refreshChildXBlock(n,t,i):this.refreshXBlock(this.findXBlockElement(s))},refreshChildXBlock:function(t,i,n){var s,o,a,c=this;return s=new u({id:t.data("locator")}),o=l.extend({updateHtml:function(t,i){this.$el=e(i).replaceAll(t)}}),a=new o({model:s,view:c.xblockView.new_child_view,el:t}),a.render({success:function(){c.onXBlockRefresh(a,i,n),a.unbind()},initRuntimeData:this})},scrollToNewComponentButtons:function(t){t.preventDefault(),e.scrollTo(this.$(".add-xblock-component"),{duration:250})}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/pages/container_subviews.js":function(e,t,i){var n,s;n=[i(0),i(1),i(3),i("./cms/static/js/views/baseview.js"),i("./common/static/common/js/components/utils/view_utils.js"),i("./cms/static/js/views/utils/xblock_utils.js"),i("./cms/static/js/views/utils/move_xblock_utils.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js")],void 0!==(s=function(e,t,i,n,s,o,a,l){"use strict";var c=n.extend({initialize:function(){this.model.on("sync",this.onSync,this)},onSync:function(e){this.shouldRefresh(e)&&this.render()},shouldRefresh:function(e){return!1},render:function(){}}),r=c.extend({initialize:function(){c.prototype.initialize.call(this),this.template=this.loadTemplate("container-access")},shouldRefresh:function(e){return s.hasChangedAttributes(e,["has_partition_group_components","user_partitions"])},render:function(){return l.setHtml(this.$el,l.HTML(this.template({hasPartitionGroupComponents:this.model.get("has_partition_group_components"),userPartitionInfo:this.model.get("user_partition_info")}))),this}});return{MessageView:c.extend({initialize:function(){c.prototype.initialize.call(this),this.template=this.loadTemplate("container-message")},shouldRefresh:function(e){return s.hasChangedAttributes(e,["currently_visible_to_students"])},render:function(){return l.setHtml(this.$el,l.HTML(this.template({currentlyVisibleToStudents:this.model.get("currently_visible_to_students")}))),this}}),ViewLiveButtonController:c.extend({shouldRefresh:function(e){return s.hasChangedAttributes(e,["published"])},render:function(){var e=this.$el.find(".button-view");this.model.get("published")?e.removeClass("is-disabled").attr("aria-disabled",!1):e.addClass("is-disabled").attr("aria-disabled",!0)}}),Publisher:n.extend({events:{"click .action-publish":"publish","click .action-discard":"discardChanges","click .action-staff-lock":"toggleStaffLock"},initialize:function(){n.prototype.initialize.call(this),this.template=this.loadTemplate("publish-xblock"),this.model.on("sync",this.onSync,this),this.renderPage=this.options.renderPage},onSync:function(e){s.hasChangedAttributes(e,["has_changes","published","edited_on","edited_by","visibility_state","has_explicit_staff_lock"])&&this.render()},render:function(){return l.setHtml(this.$el,l.HTML(this.template({visibilityState:this.model.get("visibility_state"),visibilityClass:o.getXBlockVisibilityClass(this.model.get("visibility_state")),hasChanges:this.model.get("has_changes"),editedOn:this.model.get("edited_on"),editedBy:this.model.get("edited_by"),published:this.model.get("published"),publishedOn:this.model.get("published_on"),publishedBy:this.model.get("published_by"),released:this.model.get("released_to_students"),releaseDate:this.model.get("release_date"),releaseDateFrom:this.model.get("release_date_from"),hasExplicitStaffLock:this.model.get("has_explicit_staff_lock"),staffLockFrom:this.model.get("staff_lock_from"),course:window.course,HtmlUtils:l}))),this},publish:function(e){var t=this.model;e&&e.preventDefault&&e.preventDefault(),s.runOperationShowingMessage(i("Publishing"),function(){return t.save({publish:"make_public"},{patch:!0})}).always(function(){t.set("publish",null),a.hideMovedNotification()}).done(function(){t.fetch()})},discardChanges:function(e){var t=this.model,n=this.renderPage;e&&e.preventDefault&&e.preventDefault(),s.confirmThenRunOperation(i("Discard Changes"),i("Are you sure you want to revert to the last published version of the unit? You cannot undo this action."),i("Discard Changes"),function(){s.runOperationShowingMessage(i("Discarding Changes"),function(){return t.save({publish:"discard_changes"},{patch:!0})}).always(function(){t.set("publish",null),a.hideMovedNotification()}).done(function(){n()})})},toggleStaffLock:function(e){var n,o,a,l,c=this.model,r=this;e&&e.preventDefault&&e.preventDefault(),n=!c.get("has_explicit_staff_lock"),o=c.get("ancestor_has_staff_lock"),l=function(){r.checkStaffLock(!n)},a=function(){return c.save({publish:"republish",metadata:{visible_to_staff_only:!!n||null}},{patch:!0}).always(function(){c.set("publish",null)}).done(function(){c.fetch()}).fail(function(){l()})},this.checkStaffLock(n),n&&!o?s.runOperationShowingMessage(i("Hiding from Students"),t.bind(a,r)):n&&o?s.runOperationShowingMessage(i("Explicitly Hiding from Students"),t.bind(a,r)):!n&&o?s.runOperationShowingMessage(i("Inheriting Student Visibility"),t.bind(a,r)):s.confirmThenRunOperation(i("Make Visible to Students"),i("If the unit was previously published and released to students, any changes you made to the unit when it was hidden will now be visible to students. Do you want to proceed?"),i("Make Visible to Students"),function(){s.runOperationShowingMessage(i("Making Visible to Students"),t.bind(a,r))},function(){l()})},checkStaffLock:function(e){this.$(".action-staff-lock i").removeClass("fa-check-square-o fa-square-o"),this.$(".action-staff-lock i").addClass(e?"fa-check-square-o":"fa-square-o")}}),PublishHistory:n.extend({initialize:function(){n.prototype.initialize.call(this),this.template=this.loadTemplate("publish-history"),this.model.on("sync",this.onSync,this)},onSync:function(e){s.hasChangedAttributes(e,["published","published_on","published_by"])&&this.render()},render:function(){return l.setHtml(this.$el,l.HTML(this.template({published:this.model.get("published"),published_on:this.model.get("published_on"),published_by:this.model.get("published_by")}))),this}}),ContainerAccess:r}}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/unit_outline.js":function(e,t,i){var n,s;n=[i(1),i("./cms/static/js/views/xblock_outline.js"),i("./cms/static/js/views/unit_outline_child.js")],void 0!==(s=function(e,t,i){return t.extend({templateName:"unit-outline",render:function(){return t.prototype.render.call(this),this.renderAncestors(),this},renderAncestors:function(){var e,t,i,n,s=this,o=null;if(this.model.get("ancestor_info"))for(i=this.model.get("ancestor_info").ancestors,t=this.getListElement(),e=i.length-1;e>=0;e--)n=i[e],s=this.createChildView(n,o,{parentView:s,currentUnitId:this.model.get("id")}),s.render(),t.append(s.$el),o=n,t=s.getListElement();return s},getChildViewClass:function(){return i},getTemplateContext:function(){return e.extend(t.prototype.getTemplateContext.call(this),{currentUnitId:this.model.get("id")})}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/unit_outline_child.js":function(e,t,i){var n,s;n=[i(1),i("./cms/static/js/views/xblock_outline.js")],void 0!==(s=function(e,t){var i=t.extend({initialize:function(){t.prototype.initialize.call(this),this.currentUnitId=this.options.currentUnitId},getTemplateContext:function(){return e.extend(t.prototype.getTemplateContext.call(this),{currentUnitId:this.currentUnitId})},getChildViewClass:function(){return i},createChildView:function(i,n,s){return s=e.isUndefined(s)?{}:s,t.prototype.createChildView.call(this,i,n,e.extend(s,{currentUnitId:this.currentUnitId}))}});return i}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/utils/move_xblock_utils.js":function(e,t,i){var n,s;n=[i(0),i(1),i(2),i("./common/static/common/js/components/views/feedback.js"),i("./common/static/common/js/components/views/feedback_alert.js"),i("./cms/static/js/views/utils/xblock_utils.js"),i("./cms/static/js/views/utils/move_xblock_utils.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/string-utils.js"),i("./common/static/js/vendor/jquery.smooth-scroll.min.js")],void 0!==(s=function(e,t,i,n,s,o,a,l){"use strict";var c,r,d,u,h;return c=function(e){window.location.href=e},r=function(e){o.moveXBlock(e.sourceLocator,e.targetParentLocator).done(function(t){i.trigger("move:hideMoveModal"),e.sourceXBlockElement.hide(),u(l.interpolate(gettext('Success! "{displayName}" has been moved.'),{displayName:e.sourceDisplayName}),{sourceXBlockElement:e.sourceXBlockElement,sourceDisplayName:e.sourceDisplayName,sourceLocator:e.sourceLocator,sourceParentLocator:e.sourceParentLocator,targetParentLocator:e.targetParentLocator,targetIndex:t.source_index}),i.trigger("move:onXBlockMoved")})},d=function(e){o.moveXBlock(e.sourceLocator,e.sourceParentLocator,e.targetIndex).done(function(){e.sourceXBlockElement.show(),u(l.interpolate(gettext('Move cancelled. "{sourceDisplayName}" has been moved back to its original location.'),{sourceDisplayName:e.sourceDisplayName})),i.trigger("move:onXBlockMoved")})},u=function(t,i){var n;return n=i?new s.Confirmation({title:t,actions:{primary:{text:gettext("Undo move"),class:"action-save",click:function(){d({sourceXBlockElement:i.sourceXBlockElement,sourceDisplayName:i.sourceDisplayName,sourceLocator:i.sourceLocator,sourceParentLocator:i.sourceParentLocator,targetIndex:i.targetIndex})}},secondary:[{text:gettext("Take me to the new location"),class:"action-cancel",click:function(){c("/container/"+i.targetParentLocator)}}]}}):new s.Confirmation({title:t}),n.show(),e.smoothScroll({offset:0,easing:"swing",speed:1e3}),n.$(".wrapper").first().focus(),n},h=function(){var e=n.active_alert;e&&s.prototype.hide.apply(e)},{redirectLink:c,moveXBlock:r,undoMoveXBlock:d,showMovedNotification:u,hideMovedNotification:h}}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/xblock_access_editor.js":function(e,t,i){var n,s;n=[i("./cms/static/js/views/baseview.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js")],void 0!==(s=function(e,t){"use strict";return e.extend({initialize:function(){e.prototype.initialize.call(this),this.template=this.loadTemplate("xblock-access-editor")},render:function(){return t.append(this.$el,t.HTML(this.template({}))),this}})}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/xblock_outline.js":function(e,t,i){var n,s;n=[i(0),i(1),i(3),i("./cms/static/js/views/baseview.js"),i("./common/static/common/js/components/utils/view_utils.js"),i("./cms/static/js/views/utils/xblock_utils.js"),i("./cms/static/js/views/xblock_string_field_editor.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/string-utils.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js")],void 0!==(s=function(e,t,i,n,s,o,a,l,c){"use strict";var r=n.extend({options:{collapsedClass:"is-collapsed"},templateName:"xblock-outline",initialize:function(){n.prototype.initialize.call(this),this.initialState=this.options.initialState,this.expandedLocators=this.options.expandedLocators,this.template=this.options.template,this.template||(this.template=this.loadTemplate(this.templateName)),this.parentInfo=this.options.parentInfo,this.parentView=this.options.parentView,this.renderedChildren=!1,this.model.on("sync",this.onSync,this)},render:function(){if(this.renderTemplate(),this.addButtonActions(this.$el),this.addNameEditor(),null!==this.model.get("is_header_visible")&&!this.model.get("is_header_visible")){var e=this.model.get("id");t.isUndefined(this.expandedLocators)||this.expandedLocators.contains(e)||(this.expandedLocators.add(e),this.refresh())}return this.shouldRenderChildren()&&this.shouldExpandChildren()?this.renderChildren():this.renderedChildren=!1,this},renderTemplate:function(){var t=this.template(this.getTemplateContext());this.parentInfo?this.setElement(e(t)):c.setHtml(this.$el,c.HTML(t))},getTemplateContext:function(){var e=this.model,t=e.get("child_info"),n=this.parentInfo,s=o.getXBlockType(this.model.get("category"),this.parentInfo),a=o.getXBlockType(this.model.get("category"),this.parentInfo,!0),c=n?o.getXBlockType(n.get("category")):null,r=null,d=null,u=this.shouldRenderChildren()&&!this.shouldExpandChildren();return t&&(r=l.interpolate(i("New {component_type}"),{component_type:t.display_name},!0),d=t.display_name),{xblockInfo:e,visibilityClass:o.getXBlockVisibilityClass(e.get("visibility_state")),typeListClass:o.getXBlockListTypeClass(s),parentInfo:this.parentInfo,xblockType:s,xblockTypeDisplayName:a,parentType:c,childType:t?o.getXBlockType(t.category,e):null,childCategory:t?t.category:null,addChildLabel:r,defaultNewChildName:d,isCollapsed:u,includesChildren:this.shouldRenderChildren(),hasExplicitStaffLock:this.model.get("has_explicit_staff_lock"),staffOnlyMessage:this.model.get("staff_only_message"),course:course}},renderChildren:function(){var e=this,i=this.model;i.get("child_info")&&t.each(this.model.get("child_info").children,function(t){var n=e.createChildView(t,i);n.render(),e.addChildView(n)}),this.renderedChildren=!0},getListElement:function(){return this.$("> .outline-content > ol")},addChildView:function(e,t){t?e.$el.insertAfter(t):this.getListElement().append(e.$el)},addNameEditor:function(){var e,t,i=this,n=this.$(".wrapper-xblock-field");n.length>0&&(e=a.extend({refresh:function(){i.refresh()}}),t=new e({el:n,model:this.model}),t.render())},toggleExpandCollapse:function(e){if(this.expandedLocators){var t=this.model.get("id");this.expandedLocators.contains(t)?this.expandedLocators.remove(t):this.expandedLocators.add(t)}this.ensureChildrenRendered(),n.prototype.toggleExpandCollapse.call(this,e)},ensureChildrenRendered:function(){!this.renderedChildren&&this.shouldRenderChildren()&&this.renderChildren()},addButtonActions:function(e){e.find(".delete-button").click(t.bind(this.handleDeleteEvent,this)),e.find(".duplicate-button").click(t.bind(this.handleDuplicateEvent,this)),e.find(".button-new").click(t.bind(this.handleAddEvent,this))},shouldRenderChildren:function(){return!0},shouldExpandChildren:function(){return!0},getChildViewClass:function(){return r},createChildView:function(e,i,n){return new(this.getChildViewClass())(t.extend({model:e,parentInfo:i,parentView:this,initialState:this.initialState,expandedLocators:this.expandedLocators,template:this.template},n))},onSync:function(e){s.hasChangedAttributes(this.model,["visibility_state","child_info","display_name","highlights"])&&this.onXBlockChange()},onXBlockChange:function(){var e=this.$el,t=this.initialState;this.render(),this.parentInfo&&e.replaceWith(this.$el),t&&this.setViewState(t)},setViewState:function(e){var t,i=e.locator_to_show,n=e.scroll_offset||0,o=e.edit_display_name;i&&(t=i===this.model.id?this.$el:this.$('.outline-item[data-locator="'+i+'"]'),t.length>0?s.setScrollOffset(t,n):console.error("Failed to show item with locator "+i),o&&t.find('> div[class$="header"] .xblock-field-value-edit').click()),this.initialState=null},refresh:function(){return this.model.fetch()},onChildAdded:function(e,t){"vertical"===t?this.onUnitAdded(e):this.refresh()},onUnitAdded:function(e){s.redirect("/container/"+e+"?action=new")},onChildDeleted:function(){this.refresh()},handleDeleteEvent:function(e){var t=this,i=this.parentView,n=o.getXBlockType(this.model.get("category"),i.model,!0);e.preventDefault(),o.deleteXBlock(this.model,n).done(function(){i&&i.onChildDeleted(t,e)})},getParentElement:function(e,t){var i={unit:"subsection",subsection:"section",section:"course"},n=i[t];return e.closest(".outline-"+n)},handleDuplicateEvent:function(t){var i=this,n=o.getXBlockType(i.model.get("category"),i.parentView.model),s=e(t.currentTarget).closest(".outline-item"),a=i.getParentElement(s,n);t.preventDefault(),o.duplicateXBlock(s,a).done(function(e){i.parentView&&i.parentView.onChildDuplicated(e.locator,n,s)})},handleAddEvent:function(t){var i=this,n=e(t.currentTarget),s=n.data("category");t.preventDefault(),o.addXBlock(n).done(function(e){i.onChildAdded(e,s,t)})}});return r}.apply(t,n))&&(e.exports=s)},"./cms/static/js/views/xblock_string_field_editor.js":function(e,t,i){var n,s;n=[i("./cms/static/js/views/baseview.js"),i("./cms/static/js/views/utils/xblock_utils.js")],void 0!==(s=function(e,t){return e.extend({events:{"click .xblock-field-value-edit":"showInput","click button[name=submit]":"onClickSubmit","click button[name=cancel]":"onClickCancel","click .xblock-string-field-editor":"onClickEditor","change .xblock-field-input":"updateField","focusout .xblock-field-input":"onInputFocusLost","keyup .xblock-field-input":"handleKeyUp"},initialize:function(){e.prototype.initialize.call(this),this.fieldName=this.$el.data("field"),this.fieldDisplayName=this.$el.data("field-display-name"),this.template=this.loadTemplate("xblock-string-field-editor"),this.model.on("change:"+this.fieldName,this.onChangeField,this)},render:function(){return this.$el.append(this.template({value:this.model.escape(this.fieldName),fieldName:this.fieldName,fieldDisplayName:this.fieldDisplayName})),this},getLabel:function(){return this.$(".xblock-field-value")},getInput:function(){return this.$(".xblock-field-input")},onInputFocusLost:function(){this.model.get(this.fieldName)===this.getInput().val()&&this.hideInput()},onClickSubmit:function(e){e.preventDefault(),e.stopPropagation(),this.updateField()},onClickCancel:function(e){e.preventDefault(),e.stopPropagation(),this.cancelInput()},onClickEditor:function(e){e.stopPropagation()},onChangeField:function(){var e=this.model.get(this.fieldName);this.getLabel().text(e),this.getInput().val(e),this.hideInput()},showInput:function(e){var t=this.getInput();e.preventDefault(),e.stopPropagation(),this.$el.addClass("is-editing"),t.focus().select()},hideInput:function(){this.$el.removeClass("is-editing")},cancelInput:function(){this.getInput().val(this.model.get(this.fieldName)),this.hideInput()},refresh:function(){this.model.fetch()},updateField:function(){var e=this,i=this.model,n=this.getInput().val().trim(),s=i.get(this.fieldName);return""===n||n===s?void this.cancelInput():t.updateXBlockField(i,this.fieldName,n).done(function(){e.refresh()})},handleKeyUp:function(e){27===e.keyCode&&this.cancelInput()}})}.apply(t,n))&&(e.exports=s)},"./cms/templates/js/move-xblock-breadcrumb.underscore":function(e,t){e.exports='<nav class="breadcrumbs" aria-label="Course Outline breadcrumb">\n    <% _.each(breadcrumbs.slice(0, -1), function (breadcrumb, index, items) { %>\n        <ol class="bc-container bc-<%- index %>">\n            <li class="bc-container-content">\n                <button class="parent-nav-button" data-parent-index="<%- index %>">\n                    <%- breadcrumb %>\n                </button>\n                <span class="fa fa-angle-right breadcrumb-fa-icon" aria-hidden="true"></span>\n            </li>\n        </ol>\n    <% }) %>\n    <ol class="bc-container bc-<%- breadcrumbs.length - 1 %> last">\n        <li class="bc-container-content">\n            <span class="parent-displayname"><%- breadcrumbs[breadcrumbs.length - 1] %></span>\n        </li>\n    </ol>\n</nav>\n'},"./cms/templates/js/move-xblock-list.underscore":function(e,t){e.exports='<div class="xblock-items-category">\n    <span class="sr">\n        <%\n        // Translators: message will be like `Units in Homework - Question Styles`, `Subsections in Example 1 - Getting started` etc.\n        %>\n        <%- StringUtils.interpolate(\n                gettext("{categoryText} in {parentDisplayname}"),\n                {categoryText: categoryText, parentDisplayname: parentDisplayname}\n            )\n        %>\n    </span>\n    <span class="category-text" aria-hidden="true">\n        <%- categoryText %>:\n    </span>\n</div>\n<ul class="xblock-items-container" data-items-category="<%- XBlocksCategory %>">\n    <% for (var i = 0; i < xblocks.length; i++) {\n        var xblock = xblocks[i];\n    %>\n        <li class="xblock-item" data-item-index="<%- i %>">\n            <% if (sourceXBlockId !== xblock.id && (xblock.get(\'child_info\') || XBlocksCategory !== \'component\')) { %>\n                <button class="button-forward" >\n                    <span class="xblock-displayname truncate">\n                        <%- xblock.get(\'display_name\') %>\n                    </span>\n                    <% if(currentLocationIndex === i) { %>\n                        <span class="current-location">\n                            (<%- gettext(\'Current location\') %>)\n                        </span>\n                    <% } %>\n                    <span class="icon fa fa-arrow-right forward-sr-icon" aria-hidden="true"></span>\n                    <span class="sr forward-sr-text"><%- gettext("View child items") %></span>\n                </button>\n            <% } else { %>\n                <span class="component">\n                    <span class="xblock-displayname truncate">\n                        <%- xblock.get(\'display_name\') %>\n                    </span>\n                    <% if(currentLocationIndex === i) { %>\n                        <span class="current-location">\n                            (<%- gettext(\'Currently selected\') %>)\n                        </span>\n                    <% } %>\n                </span>\n            <% } %>\n        </li>\n    <% } %>\n    <% if(xblocks.length === 0) { %>\n        <span class="xblock-no-child-message">\n            <%- noChildText %>\n        </span>\n    <% } %>\n</ul>\n'},"./cms/templates/js/move-xblock-modal.underscore":function(e,t){e.exports='<div class="ui-loading">\n    <p>\n        <span class="spin">\n            <span class="icon fa fa-refresh" aria-hidden="true"></span>\n        </span>\n        <span class="copy"><%- gettext(\'Loading\') %></span>\n    </p>\n</div>\n<div class=\'breadcrumb-container is-hidden\'></div>\n<div class=\'xblock-list-container\'></div>\n'},"./common/static/common/js/components/views/feedback_alert.js":function(e,t,i){"use strict";var n,s;n=[i(0),i(1),i("./common/static/common/js/vendor/underscore.string.js"),i("./common/static/common/js/components/views/feedback.js")],void 0!==(s=function(e,t,i,n){var s,o,a=n.extend({options:e.extend({},n.prototype.options,{type:"alert"}),slide_speed:900,show:function(){return n.prototype.show.apply(this,arguments),this.$el.hide(),this.$el.slideDown(this.slide_speed),this},hide:function(){this.$el.slideUp({duration:this.slide_speed}),setTimeout(t.bind(n.prototype.hide,this,arguments),this.slideSpeed)}});return s=t.compose(i.capitalize,i.camelize),o=["warning","error","confirmation","announcement","step-required","help","mini"],t.each(o,function(t){var i;i=a.extend({options:e.extend({},a.prototype.options,{intent:t})}),a[s(t)]=i}),a}.apply(t,n))&&(e.exports=s)}},["./cms/static/js/factories/container.js"]));
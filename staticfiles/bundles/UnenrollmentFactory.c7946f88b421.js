!function(e,t){for(var n in t)e[n]=t[n]}(window,webpackJsonp([33],{"./lms/static/js/learner_dashboard/unenrollment_factory.js":function(e,t,n){"use strict";function r(e){return new o.a(e)}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"UnenrollmentFactory",function(){return r});var o=n("./lms/static/js/learner_dashboard/views/unenroll_view.js")},"./lms/static/js/learner_dashboard/views/unenroll_view.js":function(e,t,n){"use strict";(function(e){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(2),l=n.n(i),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(t){function n(e){r(this,n);var t={el:".unenroll-modal"};return o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,a({},t,e)))}return s(n,t),c(n,[{key:"handleTrigger",value:function(e){this.$previouslyFocusedElement=e}},{key:"switchToSlideOne",value:function(){for(var e=document.querySelector(".options"),t=e.children.length-1;t>=0;t-=1)e.appendChild(e.children[Math.trunc(Math.random()*t)]);this.$(".inner-wrapper header").hide(),this.$("#unenroll_form").hide(),this.$(".slide1").removeClass("hidden"),window.trapFocusForAccessibleModal&&window.trapFocusForAccessibleModal(this.$previouslyFocusedElement,window.focusableElementsString,this.closeButtonSelector,this.modalId,this.mainPageSelector)}},{key:"switchToSlideTwo",value:function(){var e=this.$(".reasons_survey input[name='reason']:checked").attr("val");"Other"===e&&(e=this.$(".other_text").val()),e&&window.analytics.track("unenrollment_reason.selected",{category:"user-engagement",label:e,displayName:"v1"}),this.$(".slide1").addClass("hidden"),this.$(".survey_course_name").text(this.$("#unenroll_course_name").text()),this.$(".slide2").removeClass("hidden"),this.$(".reasons_survey .return_to_dashboard").attr("href",this.urls.dashboard),this.$(".reasons_survey .browse_courses").attr("href",this.urls.browseCourses),window.trapFocusForAccessibleModal&&window.trapFocusForAccessibleModal(this.$previouslyFocusedElement,window.focusableElementsString,this.closeButtonSelector,this.modalId,this.mainPageSelector)}},{key:"unenrollComplete",value:function(t,n){200===n.status?this.isEdx?(this.switchToSlideOne(),this.$(".reasons_survey:first .submit_reasons").click(this.switchToSlideTwo.bind(this))):location.href=this.urls.dashboard:403===n.status?location.href=this.urls.signInUser+"?course_id="+encodeURIComponent(e("#unenroll_course_id").val())+"&enrollment_action=unenroll":e("#unenroll_error").text(gettext("Unable to determine whether we should give you a refund because of System Error. Please try again later.")).stop().css("display","block")}},{key:"startSubmit",value:function(){this.$(".submit").prop("disabled",!0)}},{key:"initialize",value:function(t){var n=this;this.urls=t.urls,this.isEdx=t.isEdx,this.closeButtonSelector=".unenroll-modal .close-modal",this.$closeButton=e(this.closeButtonSelector),this.modalId="#"+this.$el.attr("id"),this.mainPageSelector="#dashboard-main",this.triggerSelector=".action-unenroll",e(this.triggerSelector).each(function(t,r){e(r).on("click",n.handleTrigger.bind(e(r)))}),this.$(".submit .submit-button").on("click",this.startSubmit.bind(this)),e("#unenroll_form").on("ajax:complete",this.unenrollComplete.bind(this))}}]),n}(l.a.View);t.a=u}).call(t,n(0))}},["./lms/static/js/learner_dashboard/unenrollment_factory.js"]));
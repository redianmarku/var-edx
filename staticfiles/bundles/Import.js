!function(e,t){for(var i in t)e[i]=t[i]}(window,webpackJsonp([23],{"./cms/static/js/features/import/factories/import.js":function(e,t,i){var r,s;r=[i("./common/static/js/vendor/domReady.js"),i("./cms/static/js/features/import/views/import.js"),i(0),i(3),i("./common/static/js/vendor/jQuery-File-Upload/js/jquery.fileupload.js"),i("./common/static/js/vendor/jquery.cookie.js"),i("./cms/static/cms/js/main.js")],void 0!==(s=function(e,t,i,r){"use strict";return{Import:function(s,n){var o,a,l=i(".progress-bar"),p=i(".progress-fill"),u=i(".submit-button"),c=i(".view-import .choose-file-button"),d=[r("There was an error during the upload process.")+"\n",r("There was an error while unpacking the file.")+"\n",r("There was an error while verifying the file you submitted.")+"\n",o+"\n"],f=!1,h=t.storedImport(),m=function(){l.hide(),c.find(".copy").text(r("Choose new file")).end().show()},g=function(){var e,t=i(this).val();"tar.gz"===t.substr(t.length-6,6)?(i(".error-block").hide(),i(".file-name").text(i(this).val().replace("C:\\fakepath\\","")),i(".file-name-block").show(),c.hide(),u.show(),i(".progress").show()):(e=r("File format not supported. Please upload a file with a {ext} extension.").replace("{ext}","<code>tar.gz</code>"),i(".error-block").text(e).show())};o=r(n?"There was an error while importing the new library to our database.":"There was an error while importing the new course to our database."),i(window).on("beforeunload",function(){f=!0}),h&&(i(".file-name-block").find(".file-name").text(h.file.name).end().show(),!0!==h.completed&&c.hide(),t.resume().then(m)),i("#fileupload").fileupload({dataType:"json",type:"POST",maxChunkSize:2e7,autoUpload:!1,add:function(e,n){t.reset(),u.unbind("click"),a=n.files[0],a.name.match(/tar\.gz$/)?u.click(function(e){e.preventDefault(),t.start(a.name,s.replace("fillerName",a.name)).then(m),u.hide(),n.submit().complete(function(e,s,n){var o,a,l;if(200!==n.status){try{o=i.parseJSON(e.responseText)||{}}catch(e){return}a=o.hasOwnProperty("ErrMsg")?o.ErrMsg:"",o.hasOwnProperty("Stage")?(l=Math.abs(o.Stage),t.cancel(d[l]+a,l)):f||(i(window).off("beforeunload.import"),t.reset(),m(),alert(r("Your import has failed.")+"\n\n"+a))}})}):n.files=[]},progressall:function(e,i){var r,s=i.loaded/i.total*100,n=parseInt(s,10)+"%";r=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?95:99,s>=r?(l.hide(),setTimeout(function(){t.pollStatus()},3e3)):(l.show(),p.width(n).text(n))},sequentialUploads:!0,notifyOnError:!1}),e(function(){i(".view-import .file-input").bind("change",g),i(".view-import .choose-file-button, .view-import .choose-file-button-inline").bind("click",function(e){e.preventDefault(),i(".view-import .file-input").click()})})}}}.apply(t,r))&&(e.exports=s)},"./cms/static/js/features/import/views/import.js":function(e,t,i){var r,s;r=[i(0),i(1),i(3),i("./node_modules/moment/moment.js"),i("./node_modules/edx-ui-toolkit/src/js/utils/html-utils.js"),i("./common/static/js/vendor/jquery.cookie.js")],void 0!==(s=function(e,t,i,r,s){"use strict";var n,o={UPLOADING:0,UNPACKING:1,VERIFYING:2,UPDATING:3,SUCCESS:4},a={READY:1,IN_PROGRESS:2,SUCCESS:3,ERROR:4},l={stage:0,state:a.READY},p=null,u={name:null,url:null},c={id:null,delay:1e3},d={stages:e("ol.status-progress").children(),successStage:e(".item-progresspoint-success"),wrapper:e("div.wrapper-status")},f=function(){e(window).off("beforeunload.import")},h=function(){d.wrapper.removeClass("is-hidden")},m=function(){e(window).on("beforeunload.import",function(){if(l.stage<o.UNPACKING)return i("Your import is in progress; navigating away will abort it.")})},g=function(t){e.cookie("lastimportupload",JSON.stringify({file:u,date:r().valueOf(),completed:t||!1}),{path:window.location.pathname})},_=function(i){function o(t){e(t).removeClass("is-not-started is-started").addClass("is-complete")}function p(t){e(t).removeClass("is-complete is-started has-error").addClass("is-not-started").find("p.error").remove().end().find("p.copy").show()}var u,c,f,h,m,g,_,v;switch(u=d.successStage.find(".icon"),g=i||"",l.state){case a.READY:t.map(d.stages,p);break;case a.IN_PROGRESS:f=d.stages.slice(0,l.stage),c=d.stages.eq(l.stage),t.map(f,o),c.removeClass("is-not-started").addClass("is-started");break;case a.SUCCESS:_=n.storedImport().date,m=r(_).utc().format("MM/DD/YYYY"),v=r(_).utc().format("HH:mm"),t.map(d.stages,o),d.successStage.find(".item-progresspoint-success-date").text("("+m+" at "+v+" UTC)");break;case a.ERROR:f=d.stages.slice(0,l.stage+1),c=d.stages.eq(l.stage),h=d.stages.slice(l.stage+1),t.map(f,o),t.map(h,p),function(t){e(t).hasClass("has-error")||(g=s.joinHtml(s.HTML('<p class="copy error">'),g,s.HTML("</p>")),e(t).removeClass("is-started").addClass("has-error").find("p.copy").hide().after(s.ensureHtml(g).toString()))}(c)}l.state===a.SUCCESS?u.removeClass("fa-square-o").addClass("fa-check-square-o"):u.removeClass("fa-check-square-o").addClass("fa-square-o")},v=function(e,t){l.stage=Math.abs(t||l.stage),l.state=a.ERROR,f(),clearTimeout(c.id),_(e),p.resolve()},b=function(){l.state=a.SUCCESS,!0!==n.storedImport().completed&&g(!0),f(),_(),p.resolve()};return n={cancel:function(e,t){v(e,t)},pollStatus:function(t){l.state===a.IN_PROGRESS&&(l.stage=t||o.UPLOADING,l.stage===o.SUCCESS?b():l.stage<o.UPLOADING?v(i("Error importing course")):(_(),e.getJSON(u.url,function(e){c.id=setTimeout(function(){this.pollStatus(e.ImportStatus)}.bind(this),c.delay)}.bind(this))))},reset:function(){l.stage=o.UPLOADING,l.state=a.READY,clearTimeout(c.id),_()},resume:function(){return p=e.Deferred(),u=this.storedImport().file,e.getJSON(u.url,function(e){l.stage=e.ImportStatus,h(),l.stage!==o.UPLOADING?(l.state=a.IN_PROGRESS,this.pollStatus(l.stage)):v(i("There was an error with the upload"))}.bind(this)),p.promise()},start:function(t,i){return l.state=a.IN_PROGRESS,p=e.Deferred(),u.name=t,u.url=i,m(),g(),h(),_(),p.promise()},storedImport:function(){return JSON.parse(e.cookie("lastimportupload"))}}}.apply(t,r))&&(e.exports=s)},"./common/static/js/vendor/jQuery-File-Upload/js/jquery.fileupload.js":function(e,t,i){var r,s,n;!function(o){"use strict";s=[i(0),i("./common/static/js/vendor/jquery-ui.min.js")],r=o,void 0!==(n="function"==typeof r?r.apply(t,s):r)&&(e.exports=n)}(function(e){"use strict";e.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||e('<input type="file">').prop("disabled")),e.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader),e.support.xhrFormDataFileUpload=!!window.FormData,e.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),e.widget("blueimp.fileupload",{options:{dropZone:e(document),pasteZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(t,i){return t=this.messages[t]||t.toString(),i&&e.each(i,function(e,i){t=t.replace("{"+e+"}",i)}),t},formData:function(e){return e.serializeArray()},add:function(t,i){(i.autoUpload||!1!==i.autoUpload&&e(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:e.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(e,t,i){var r=e-this.timestamp;return(!this.bitrate||!i||r>i)&&(this.bitrate=(t-this.loaded)*(1e3/r)*8,this.loaded=t,this.timestamp=e),this.bitrate}},_isXHRUpload:function(t){return!t.forceIframeTransport&&(!t.multipart&&e.support.xhrFileUpload||e.support.xhrFormDataFileUpload)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:"object"===e.type(t.formData)?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_initProgressObject:function(t){var i={loaded:0,total:0,bitrate:0};t._progress?e.extend(t._progress,i):t._progress=i},_initResponseObject:function(e){var t;if(e._response)for(t in e._response)e._response.hasOwnProperty(t)&&delete e._response[t];else e._response={}},_onProgress:function(e,t){if(e.lengthComputable){var i,r=Date.now?Date.now():(new Date).getTime();if(t._time&&t.progressInterval&&r-t._time<t.progressInterval&&e.loaded!==e.total)return;t._time=r,i=Math.floor(e.loaded/e.total*(t.chunkSize||t._progress.total))+(t.uploadedBytes||0),this._progress.loaded+=i-t._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(r,this._progress.loaded,t.bitrateInterval),t._progress.loaded=t.loaded=i,t._progress.bitrate=t.bitrate=t._bitrateTimer.getBitrate(r,i,t.bitrateInterval),this._trigger("progress",e,t),this._trigger("progressall",e,this._progress)}},_initProgressListener:function(t){var i=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){var r=e.originalEvent;e.lengthComputable=r.lengthComputable,e.loaded=r.loaded,e.total=r.total,i._onProgress(e,t)}),t.xhr=function(){return r})},_isInstanceOf:function(e,t){return Object.prototype.toString.call(t)==="[object "+e+"]"},_initXHRData:function(t){var i,r=this,s=t.files[0],n=t.multipart||!e.support.xhrFileUpload,o=t.paramName[0];t.headers=t.headers||{},t.contentRange&&(t.headers["Content-Range"]=t.contentRange),n&&!t.blob&&this._isInstanceOf("File",s)||(t.headers["Content-Disposition"]='attachment; filename="'+encodeURI(s.name)+'"'),n?e.support.xhrFormDataFileUpload&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:o,value:t.blob}):e.each(t.files,function(e,r){i.push({name:t.paramName[e]||o,value:r})})):(r._isInstanceOf("FormData",t.formData)?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(o,t.blob,s.name):e.each(t.files,function(e,s){(r._isInstanceOf("File",s)||r._isInstanceOf("Blob",s))&&i.append(t.paramName[e]||o,s,s.name)})),t.data=i):(t.contentType=s.type,t.data=t.blob||s),t.blob=null},_initIframeSettings:function(t){var i=e("<a></a>").prop("href",t.url).prop("host");t.dataType="iframe "+(t.dataType||""),t.formData=this._getFormData(t),t.redirect&&i&&i!==location.host&&t.formData.push({name:t.redirectParamName||"redirect",value:t.redirect})},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e)},_getParamName:function(t){var i=e(t.fileInput),r=t.paramName;return r?e.isArray(r)||(r=[r]):(r=[],i.each(function(){for(var t=e(this),i=t.prop("name")||"files[]",s=(t.prop("files")||[1]).length;s;)r.push(i),s-=1}),r.length||(r=[i.prop("name")||"files[]"])),r},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form")),t.form.length||(t.form=e(this.options.fileInput.prop("form")))),t.paramName=this._getParamName(t),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&"PATCH"!==t.type&&(t.type="POST"),t.formAcceptCharset||(t.formAcceptCharset=t.form.attr("accept-charset"))},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(e){return e.state?e.state():e.isResolved()?"resolved":e.isRejected()?"rejected":"pending"},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,r){var s=e.Deferred(),n=s.promise();return i=i||this.options.context||n,!0===t?s.resolveWith(i,r):!1===t&&s.rejectWith(i,r),n.abort=s.promise,this._enhancePromise(n)},_addConvenienceMethods:function(t,i){var r=this,s=function(t){return e.Deferred().resolveWith(r,[t]).promise()};i.process=function(e,t){return(e||t)&&(i._processQueue=this._processQueue=(this._processQueue||s(this)).pipe(e,t)),this._processQueue||s(this)},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==r._trigger("submit",t,this)&&r._onSend(t,this)),this.jqXHR||r._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():r._getXHRPromise()},i.state=function(){return this.jqXHR?r._getDeferredState(this.jqXHR):this._processQueue?r._getDeferredState(this._processQueue):void 0},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(e){var t=e.getResponseHeader("Range"),i=t&&t.split("-"),r=i&&i.length>1&&parseInt(i[1],10);return r&&r+1},_chunkedUpload:function(t,i){t.uploadedBytes=t.uploadedBytes||0;var r,s,n=this,o=t.files[0],a=o.size,l=t.uploadedBytes,p=t.maxChunkSize||a,u=this._blobSlice,c=e.Deferred(),d=c.promise();return!(!(this._isXHRUpload(t)&&u&&(l||p<a))||t.data)&&(!!i||(l>=a?(o.error=t.i18n("uploadedBytes"),this._getXHRPromise(!1,t.context,[null,"error",o.error])):(s=function(){var i=e.extend({},t),d=i._progress.loaded;i.blob=u.call(o,l,l+p,o.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+a,n._initXHRData(i),n._initProgressListener(i),r=(!1!==n._trigger("chunksend",null,i)&&e.ajax(i)||n._getXHRPromise(!1,i.context)).done(function(r,o,p){l=n._getUploadedBytes(p)||l+i.chunkSize,d+i.chunkSize-i._progress.loaded&&n._onProgress(e.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),t.uploadedBytes=i.uploadedBytes=l,i.result=r,i.textStatus=o,i.jqXHR=p,n._trigger("chunkdone",null,i),n._trigger("chunkalways",null,i),l<a?s():c.resolveWith(i.context,[r,o,p])}).fail(function(e,t,r){i.jqXHR=e,i.textStatus=t,i.errorThrown=r,n._trigger("chunkfail",null,i),n._trigger("chunkalways",null,i),c.rejectWith(i.context,[e,t,r])})},this._enhancePromise(d),d.abort=function(){return r.abort()},s(),d)))},_beforeSend:function(e,t){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(t),this._initProgressObject(t),t._progress.loaded=t.loaded=t.uploadedBytes||0,t._progress.total=t.total=this._getTotal(t.files)||1,t._progress.bitrate=t.bitrate=0,this._active+=1,this._progress.loaded+=t.loaded,this._progress.total+=t.total},_onDone:function(t,i,r,s){var n=s._progress.total,o=s._response;s._progress.loaded<n&&this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:n,total:n}),s),o.result=s.result=t,o.textStatus=s.textStatus=i,o.jqXHR=s.jqXHR=r,this._trigger("done",null,s)},_onFail:function(e,t,i,r){var s=r._response;r.recalculateProgress&&(this._progress.loaded-=r._progress.loaded,this._progress.total-=r._progress.total),s.jqXHR=r.jqXHR=e,s.textStatus=r.textStatus=t,s.errorThrown=r.errorThrown=i,this._trigger("fail",null,r)},_onAlways:function(e,t,i,r){this._trigger("always",null,r)},_onSend:function(t,i){i.submit||this._addConvenienceMethods(t,i);var r,s,n,o,a=this,l=a._getAJAXSettings(i),p=function(){return a._sending+=1,l._bitrateTimer=new a._BitrateTimer,r=r||((s||!1===a._trigger("send",t,l))&&a._getXHRPromise(!1,l.context,s)||a._chunkedUpload(l)||e.ajax(l)).done(function(e,t,i){a._onDone(e,t,i,l)}).fail(function(e,t,i){a._onFail(e,t,i,l)}).always(function(e,t,i){if(a._onAlways(e,t,i,l),a._sending-=1,a._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>a._sending)for(var r=a._slots.shift();r;){if("pending"===a._getDeferredState(r)){r.resolve();break}r=a._slots.shift()}0===a._active&&a._trigger("stop")})};return this._beforeSend(t,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(n=e.Deferred(),this._slots.push(n),o=n.pipe(p)):(this._sequence=this._sequence.pipe(p,p),o=this._sequence),o.abort=function(){return s=[void 0,"abort","abort"],r?r.abort():(n&&n.rejectWith(l.context,s),p())},this._enhancePromise(o)):p()},_onAdd:function(t,i){var r,s,n,o,a=this,l=!0,p=e.extend({},this.options,i),u=p.limitMultiFileUploads,c=this._getParamName(p);if((p.singleFileUploads||u)&&this._isXHRUpload(p))if(!p.singleFileUploads&&u)for(n=[],r=[],o=0;o<i.files.length;o+=u)n.push(i.files.slice(o,o+u)),s=c.slice(o,o+u),s.length||(s=c),r.push(s);else r=c;else n=[i.files],r=[c];return i.originalFiles=i.files,e.each(n||i.files,function(s,o){var p=e.extend({},i);return p.files=n?o:[o],p.paramName=r[s],a._initResponseObject(p),a._initProgressObject(p),a._addConvenienceMethods(t,p),l=a._trigger("add",t,p)}),l},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?i[0]:r}),t[0]===this.element[0]&&(this.element=i)},_handleFileTreeEntry:function(t,i){var r,s=this,n=e.Deferred(),o=function(e){e&&!e.entry&&(e.entry=t),n.resolve([e])};return i=i||"",t.isFile?t._file?(t._file.relativePath=i,n.resolve(t._file)):t.file(function(e){e.relativePath=i,n.resolve(e)},o):t.isDirectory?(r=t.createReader(),r.readEntries(function(e){s._handleFileTreeEntries(e,i+t.name+"/").done(function(e){n.resolve(e)}).fail(o)},o)):n.resolve([]),n.promise()},_handleFileTreeEntries:function(t,i){var r=this;return e.when.apply(e,e.map(t,function(e){return r._handleFileTreeEntry(e,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(t){t=t||{};var i=t.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(e.map(i,function(e){var t;return e.webkitGetAsEntry?(t=e.webkitGetAsEntry(),t&&(t._file=e.getAsFile()),t):e.getAsEntry()})):e.Deferred().resolve(e.makeArray(t.files)).promise()},_getSingleFileInputFiles:function(t){t=e(t);var i,r,s=t.prop("webkitEntries")||t.prop("entries");if(s&&s.length)return this._handleFileTreeEntries(s);if(i=e.makeArray(t.prop("files")),i.length)void 0===i[0].name&&i[0].fileName&&e.each(i,function(e,t){t.name=t.fileName,t.size=t.fileSize});else{if(!(r=t.prop("value")))return e.Deferred().resolve([]).promise();i=[{name:r.replace(/^.*\\/,"")}]}return e.Deferred().resolve(i).promise()},_getFileInputFiles:function(t){return t instanceof e&&1!==t.length?e.when.apply(e,e.map(t,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(t)},_onChange:function(t){var i=this,r={fileInput:e(t.target),form:e(t.target.form)};this._getFileInputFiles(r.fileInput).always(function(e){r.files=e,i.options.replaceFileInput&&i._replaceFileInput(r.fileInput),!1!==i._trigger("change",t,r)&&i._onAdd(t,r)})},_onPaste:function(t){var i=t.originalEvent&&t.originalEvent.clipboardData&&t.originalEvent.clipboardData.items,r={files:[]};if(i&&i.length&&(e.each(i,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&r.files.push(i)}),!1===this._trigger("paste",t,r)||!1===this._onAdd(t,r)))return!1},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var t=this,i=e.dataTransfer,r={};i&&i.files&&i.files.length&&(e.preventDefault(),this._getDroppedFiles(i).always(function(i){r.files=i,!1!==t._trigger("drop",e,r)&&t._onAdd(e,r)}))},_onDragOver:function(t){t.dataTransfer=t.originalEvent&&t.originalEvent.dataTransfer;var i=t.dataTransfer;if(i){if(!1===this._trigger("dragover",t))return!1;-1!==e.inArray("Files",i.types)&&(i.dropEffect="copy",t.preventDefault())}},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),e.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(t,i){var r=-1!==e.inArray(t,this._specialOptions);r&&this._destroyEventHandlers(),this._super(t,i),r&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):t.fileInput instanceof e||(t.fileInput=e(t.fileInput)),t.dropZone instanceof e||(t.dropZone=e(t.dropZone)),t.pasteZone instanceof e||(t.pasteZone=e(t.pasteZone))},_getRegExp:function(e){var t=e.split("/"),i=t.pop();return t.shift(),new RegExp(t.join("/"),i)},_isRegExpOption:function(t,i){return"url"!==t&&"string"===e.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var t=this,i=this.options;e.each(e(this.element[0].cloneNode(!1)).data(),function(e,r){t._isRegExpOption(e,r)&&(r=t._getRegExp(r)),i[e]=r})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(t){var i=this;t&&!this.options.disabled&&(t.fileInput&&!t.files?this._getFileInputFiles(t.fileInput).always(function(e){t.files=e,i._onAdd(null,t)}):(t.files=e.makeArray(t.files),this._onAdd(null,t)))},send:function(t){if(t&&!this.options.disabled){if(t.fileInput&&!t.files){var i,r,s=this,n=e.Deferred(),o=n.promise();return o.abort=function(){return r=!0,i?i.abort():(n.reject(null,"abort","abort"),o)},this._getFileInputFiles(t.fileInput).always(function(e){if(!r){if(!e.length)return void n.reject();t.files=e,i=s._onSend(null,t).then(function(e,t,i){n.resolve(e,t,i)},function(e,t,i){n.reject(e,t,i)})}}),this._enhancePromise(o)}if(t.files=e.makeArray(t.files),t.files.length)return this._onSend(null,t)}return this._getXHRPromise(!1,t&&t.context)}})})}},["./cms/static/js/features/import/factories/import.js"]));